{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Zoe - The Kafka CLI for humans","text":"<p>Zoe is a command line tool to interact with kafka in an easy and intuitive way. Wanna see this in action ? check out this demo...</p> <p></p> <p>Zoe really shines when it comes to interacting with cloud hosted kafka clusters (kubernetes, AWS, etc.) due to its ability to offload consumption and execution to kubernetes pods or lambda functions (more runners will be supported in the future).</p>"},{"location":"#try-out-zoe-right-from-your-browser","title":"Try out zoe right from your browser!","text":"<p>You can use our Katacoda course to try out zoe and learn about the basics without even installing it.</p>"},{"location":"#key-features","title":"Key features","text":"<p>Here are some of the most interesting features of zoe :</p> <ul> <li>Supports offloading consumption of data to lambda functions, kubernetes pods, etc. for parallelism (ex. adding <code>-r kubernetes</code> would offload all the requests to multiple pods in a configured kubernetes cluster).</li> <li>Consume kafka topics from a specific point in time (ex. using <code>--from 'PT5h</code> from the last 5 hours).</li> <li>Filter data based on content (ex. using <code>--filter \"id == '12345'\"</code> filters records with the selected id).</li> <li>Monitor consumer groups' offsets.</li> <li>Upload avro schemas from a <code>.avsc</code> or <code>.avdl</code> file using different naming strategies.</li> <li>... and more.</li> </ul> <p>Go to the install section for instructions on how to install the zoe CLI.</p>"},{"location":"#quickstart","title":"Quickstart","text":"<pre><code># Initialize zoe configuration\nzoe config init\n\n# The generated config points to a local kafka cluster (localhost:29092). You can edit it using the following command\nzoe config edit\n\n# You can inspect the list of clusters you have in your config\nzoe -o table config clusters list\n\n# You can now use zoe to interact with the clusters\nzoe -o table topics list\n</code></pre>"},{"location":"#sample-commands","title":"Sample commands","text":"<p>Read 10 records from the <code>input</code> topic from the <code>local</code> kafka cluster (aliases for topics and clusters are set in the configuration) :</p> CommandOutput <pre><code>zoe --cluster local topics consume -n 10 \n</code></pre> <pre><code>{\"_id\":\"5b199196ce456e001424256a\",\"text\":\"Cats can distinguish different flavors in water.\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":6,\"userUpvoted\":null}\n{\"_id\":\"5b1b411d841d9700146158d9\",\"text\":\"The Egyptian Mau\u2019s name is derived from the Middle...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":5,\"userUpvoted\":null}\n{\"_id\":\"591d9b2f227c1a0020d26823\",\"text\":\"Every year, nearly four million cats are eaten in ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"_id\":\"59951d5ef2db18002031693c\",\"text\":\"America\u2019s cats, including housecats that adventure...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"_id\":\"5a4d76916ef087002174c28b\",\"text\":\"A cat\u2019s nose pad is ridged with a unique pattern, ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n</code></pre> <p>Read the 10 records starting from the last 6 hours and format the output data as a table :</p> CommandOutput <pre><code>zoe --cluster local \\\n    --output table\n    topics consume \\\n    -n 10 \\\n    --from 'PT6h'\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 _id                      \u2502 text                                                  \u2502 type \u2502 user                                      \u2502 upvotes \u2502 userUpvoted \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 599f89639a11040c4a163440 \u2502 Here is a video of some cats in zero gravity. yout... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 5       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 591d9b2f227c1a0020d26823 \u2502 Every year, nearly four million cats are eaten in ... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5b3bd7d24cf4e10014bfd199 \u2502 The myth that a cat has nine lives comes from thei... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 3       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5b453e380fd3a600147f32f3 \u2502 Exposure to UV light with hairless or partially-ha... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 3       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 590b9d90229d260020af0b06 \u2502 Evidence suggests domesticated cats have been arou... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Filter only records that belong to <code>Kasimir</code> :</p> CommandOutput <pre><code>zoe --cluster local \\\n    --output table \\\n    topics consume \\\n    -n 10 \\\n    --from 'PT6h' \\\n    --filter \"user.name.first == 'Kasimir'\"\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 _id                      \u2502 text                                                  \u2502 type \u2502 user                                      \u2502 upvotes \u2502 userUpvoted \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e009390aac31001185ed10 \u2502 Most cats are lactose intolerant, and milk can cau... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e007cc0aac31001185ecf5 \u2502 Cats are the most popular pet in the United States... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e008c50aac31001185ed0e \u2502 The world's richest cat is worth $13 million after... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e009790aac31001185ed14 \u2502 The technical term for \"hairball\" is \"bezoar.\"        \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Do the same search as before but against my production kafka cluster and by offloading the consumption to kubernetes and spinning up 10 pods in parallel :</p> Command <pre><code>zoe --cluster my-production-kafka \\\n    --output table \\\n    --runner kubernetes \\\n    topics consume \\\n    -n 10 \\\n    --from 'PT6h' \\\n    --filter \"user.name.first == 'Kasimir'\" \\\n    --jobs 10\n</code></pre> <p>Display the offsets of my consumer group <code>my-group</code> :</p> CommandOutput <pre><code>zoe -o table -v -c my-cluster groups offsets my-consumer-group-name\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 topic    \u2502 partition \u2502 currentOffset \u2502 endOffset \u2502 lag \u2502 metadata \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 3         \u2502 49993793      \u2502 49993793  \u2502 0   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 4         \u2502 50275990      \u2502 50275991  \u2502 1   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 1         \u2502 50155761      \u2502 50155762  \u2502 1   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 2         \u2502 50212574      \u2502 50212574  \u2502 0   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 0         \u2502 50027346      \u2502 50027347  \u2502 1   \u2502          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"#maintainers","title":"Maintainers","text":"<ul> <li>Created by: Walid Lezzar (Github, Twitter, LinkedIn)</li> </ul>"},{"location":"#contributors","title":"Contributors","text":"<p>Contributor's guide coming soon.</p>"},{"location":"advanced/aliases/","title":"Aliases","text":"<p>Zoe allows you to create aliases for commonly used commands. For example, to create an alias for <code>zoe -e pro topics list</code>, use the following command:</p> <pre><code>zoe aliases add --name ptl -- -e pro topics list\n</code></pre> <p>Subsequently, each time you call:</p> <pre><code>zoe ptl\n</code></pre> <p>Zoe will detect that it has a matching alias named <code>ptl</code> and replace it with: <code>zoe -e pro topics list</code>.</p> <p>For more details on aliases, use: <code>zoe aliases --help</code>.</p>"},{"location":"advanced/avro/","title":"Using avro and the schema registry","text":"<p>Zoe has good support for Avro and the schema registry. It makes it easy to consume and display avro data nicely as normal json objects or as a table (<code>--output table</code>). It is also easy to produce Avro data from json files as an input.</p>"},{"location":"advanced/avro/#consuming-avro-data","title":"Consuming Avro data","text":"<p>In order to consume Avro data from Kafka, it is enough to set the necessary deserializers properties in the <code>props</code> section of the cluster config :</p> <pre><code>clusters:\n\n  my-cluster:\n    props:\n      bootstrap.servers: my-cluster.example.com:9094\n      key.deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value.deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer\n      schema.registry.url: http://my-registry.example.com\n</code></pre> <p>Then, it's possible to consume Avro data using the following command :</p> <pre><code>zoe -v -c my-cluster topics consume input -n 10\n</code></pre> <p>With the above command :</p> <ul> <li>Zoe consumes data from the input topic and deserializes it using the <code>key.deserializer</code> and <code>value.deserializer</code>.</li> <li>It transforms the data into json (to be able to apply eventual filters)</li> </ul>"},{"location":"advanced/avro/#producing-avro-data","title":"Producing Avro data","text":"<p>To produce Avro data from a json input using the <code>produce</code> command, it is necessary to set :</p> <ul> <li>The <code>registry</code> property that points to the schema registry instance. Zoe uses this property to fetch the Avro schema needed to transform the json data into Avro.</li> <li>The required serializer properties of the producer in the <code>props</code> section of the cluster config.</li> <li>In addition, you need to set the <code>subject</code> name of the topic in the topic's configuration.</li> </ul> <p>A good enough configuration for producing Avro data may look like the following :</p> <pre><code>clusters:\n\n  my-cluster:\n    props:\n      bootstrap.servers: my-cluster.example.com:9094\n      key.serializer: org.apache.kafka.common.serialization.StringSerializer\n      value.serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\n      value.subject.name.strategy: io.confluent.kafka.serializers.subject.TopicRecordNameStrategy\n    registry: https://my-registry.example.com\n    topics:\n      my-topic:\n        name: long-topic-name\n        subject: long-topic-name-com.adevinta.schemas.v1.Example\n</code></pre> <p>With the configuration above, you can execute the following command :</p> <pre><code>zoe -v --cluster my-cluster \\\n    topics produce \\\n    --from-file data.json \\\n    --topic my-topic \\\n    --key-path 'id' \n</code></pre> <p>The command above would do the following :</p> <ul> <li>It fetches the Avro schema registered under the subject name <code>long-topic-name-com.adevinta.schemas.v1.Example</code> in the schema registry instance pointed at by the <code>registry</code> property in the configuration.</li> <li>It uses the schema to transform the json data in <code>data.json</code> into Avro <code>GenericRecord</code> instances.</li> <li>Writes the generic records into <code>long-name-topic</code> (aliased by <code>my-topic</code>).</li> </ul>"},{"location":"advanced/avro/#interacting-with-the-registry","title":"Interacting with the registry","text":"<p>You can also interact with the schema registry using the <code>zoe schemas</code> command. Here is a non exhaustive list  of what you can do :</p> <ul> <li>List avro schemas registered into the registry.</li> <li>Describe a specific Avro schema.</li> <li>Deploy an Avro schema into the registry from an <code>.avsc</code> or <code>.avdl</code> file.</li> <li>Delete a specific Avro schema or subject from the registry.</li> </ul>"},{"location":"advanced/avro/#where-to-go-from-here","title":"Where to go from here","text":"<ul> <li>There is a hands on tutorial on using zoe with Avro at : guides/avro. </li> <li>Learn more about interacting with the registry with : <code>zoe schemas --help</code></li> </ul>"},{"location":"advanced/defaults/","title":"Managing defaults","text":"<p>Commands can become quite long when you start using more and more features of zoe. Take a look at the following command as an example:</p> <pre><code>zoe -o table -e pro -c my-cluster topics consume --dialect jq --filter '.id == \"2\"'\n</code></pre> <p>The above command:</p> <ul> <li>Sets the output format for zoe results to <code>table</code> with <code>-o table</code> instead of the default value <code>json</code>.</li> <li>Uses the <code>pro</code> environment config file using the <code>-e pro</code> instead of the default environment <code>default</code>.</li> <li>Uses the <code>my-cluster</code> cluster using <code>-c my-cluster</code> instead of the default cluster <code>default</code>.</li> <li>Sets <code>jq</code> as the dialect for writing json queries with <code>--dialect jq</code> instead of the default dialect <code>jmespath</code>.</li> </ul> <p>If you find yourself repeating the same option values over and over again, it might be worth setting them as the default option values for zoe.</p>"},{"location":"advanced/defaults/#changing-the-default-values-for-zoe","title":"Changing the default values for zoe","text":"<p>To override zoe defaults, use the following command:</p> <pre><code>zoe config defaults edit\n</code></pre> <p>The above command opens your default text editor (ex. nano or vim) and allows you to update the defaults. You can choose a different editor by using the <code>EDITOR</code> environment variable:</p> <pre><code># Use VSCode to edit the values\nEDITOR=\"code -w\" zoe config defaults edit\n</code></pre> <p>For example, by setting the defaults to the following values:</p> <pre><code>cluster: pro\nenvironment: my-cluster\noutputFormat: table\ntopic:\n  consume:\n    jsonQueryDialect: jq\n</code></pre> <p>You could rewrite the above command mentioned in the introduction section as the following:</p> <pre><code>zoe topics consume --filter '.id == \"2\"'\n</code></pre>"},{"location":"advanced/defaults/#editing-defaults-manually","title":"Editing defaults manually","text":"<p>Default values are stored and kept in a local file named <code>$HOME/.zoe/defaults.yml</code>. You can edit this file manually, but you lose the type checking and validation provided by the equivalent <code>zoe config defaults edit</code> command. Thus, it's always encouraged to modify the defaults via this command.</p>"},{"location":"advanced/defaults/#list-of-overridable-defaults","title":"List of overridable defaults","text":"<p>Here is the list of currently overridable defaults:</p> <pre><code># Default for: `zoe -c &lt;value&gt;`\ncluster: default\n\n# Default for: `zoe -e &lt;value&gt;`\nenvironment: default\n\n# Default for: `zoe -o &lt;value&gt;`\noutputFormat: raw\n\n# Default for: `zoe --silent / --no-silent`\nsilent: false\n\ntopic:\n  consume:\n    # Default for: `zoe topics consume --dialect &lt;value&gt;`\n    jsonQueryDialect: jmespath\n</code></pre>"},{"location":"advanced/expressions/","title":"Registered expressions","text":"<p>We saw in the section about consuming data with zoe that zoe can make use of Jmespath filter expressions to output only a subset of the data read from Kafka.</p> <p>Jmespath expressions can be long and tedious to write especially in the command line. Some characters like quotes and backticks may be interpreted wrongly by the shell. Additionally, it may be repetitive to write if the expression is commonly used.</p> <p>Zoe allows you to save reusable Jmespath expressions in the configuration file and refer to them by an alias when using zoe.</p>"},{"location":"advanced/expressions/#registered-expressions-without-arguments","title":"Registered expressions without arguments","text":"<p>Registered expressions are set under the <code>expressions</code> key in zoe's configuration file :</p> <pre><code>expressions:\n  popular_facts: \"upvotes &gt;= `2`\"\n</code></pre> <p>The example above shows a registered expression aliased by <code>popular_facts</code> that represents the expression <code>upvotes &gt;= 2</code>. We can refer to this expression using <code>@popular_facts()</code> with zoe :</p> <pre><code>zoe -v -c my-cluster topics consume --filter '@popular_facts()' \n</code></pre> <p>Zoe will replace <code>@popular_facts()</code> by <code>upvotes &gt;= '2'</code> at runtime without having bash interfering with our expression.</p>"},{"location":"advanced/expressions/#registered-expressions-with-arguments","title":"Registered expressions with arguments","text":"<p>Registered expressions can accept named arguments. Here is an example of an expression that expects a single argument named <code>value</code>:</p> <pre><code>expressions:\n  short_id: \"ends_with(id, '{{ value }}')\"\n</code></pre> <p>Notice the <code>{{ value }}</code> part. When referring to the expression with <code>@short_id</code>, zoe will expect an argument named <code>value</code>:</p> <pre><code>zoe -v -c my-cluster topics consume --filter '@short_id(value=22121)' \n</code></pre> <p>Zoe replaces <code>@short_id(value=22121)</code> with <code>ends_with(id, '22121')</code> at runtime.</p> <p>It is also possible for a registered expression to accept multiple named arguments. They just need to be separated by a comma.</p> <p>Tip</p> <p>Registered expressions allow team members to share commonly used filters between them. A good practice is to put these expressions in the <code>common.yml</code> config file so that expressions become available in all the environments.</p>"},{"location":"advanced/runners/kubernetes/","title":"Kubernetes runner","text":"<p>The kubernetes runner launches the consumer / producer processes as pods in a remote kubernetes cluster.</p> <p>This runner needs to be configured in the <code>runners.config.kubernetes</code> section in zoe's configuration file to target your existing kubernetes cluster.</p> <p>In order to locate and authenticate with the remote cluster, Zoe relies on the usual kube config file that is usually in <code>~/.kube/config</code>. It uses the current context by default unless set otherwise in the configuration. It's also possible to configure the pods memory / cpu limits. Here is a complete configuration for the kubernetes runner:</p> <pre><code>runners:\n  default: kubernetes\n  config:\n    kubernetes:\n      # Context to use. Optional: By default, zoe uses the current context set in the kube config file.    \n      context: mu-kube-context\n      # Namespace to use. Optional: By default, zoe uses the 'default' namespace.\n      namespace: env-staging\n      # Delete pods after completion ?\n      deletePodAfterCompletion: true\n      # CPU limits\n      cpu: \"1\"\n      # Memory limits\n      memory: \"512M\"\n      # Timeout for the client operations.\n      timeoutMs: 300000\n      # Annotations to attach to the pods. Optional: By default, empty\n      annotations:\n        key1: value1\n        key2: value2\n</code></pre>"},{"location":"advanced/runners/lambda/","title":"Lambda runner","text":"<p>The lambda runner triggers lambda functions to read / produce to the Kafka clusters.</p> <p>The lambda function needs to be deployed beforehand using the zoe CLI. The deployment context of the lambda function needs to be configured in the <code>lambda</code> section of the runners config :</p> <pre><code>runners:\n  default: lambda\n  config:\n    lambda:\n      nameSuffix: null  # optional: if not null, this would be appended at the end of the function name\n      deploy:\n        subnets: [\"subnet-xxxxxxx\"]\n        securityGroups: [\"sg-yyyyyyy\"]\n        memory: 512\n        timeout: 500\n      credentials:\n        type: \"profile\"\n        name: \"my-profile\"\n      awsRegion: eu-west-1\n</code></pre> <p>To deploy the lambda function using the configured deployment context:</p> <pre><code>zoe -v lambda deploy\n</code></pre> <p>Zoe deploys the lambda function in 2 steps :</p> <ol> <li>It deploys a minimal set of resources needed by the lambda using CloudFormation (an S3 bucket, AWS roles, etc.). For more details on the resources deployed, checkout the cloudformation template.</li> <li>It deploys the lambda function itself by uploading the local Zoe JAR into AWS and registering the lambda within AWS. Zoe jar path needs to be set and must point to a valid zoe core jar downloaded beforehand (Todo: a guide for this).</li> </ol> <p>Once the lambda function is deployed, you can use the lambda runner to interact with your cluster:</p> <pre><code>zoe -c my-cluster -r lambda topics consume input -n 10\n</code></pre>"},{"location":"advanced/runners/lambda/#supported-credentials","title":"Supported credentials","text":"<p>The authentication method is configured in the credentials section of the lambda runner config. 3 Authentication types are supported :</p> <ol> <li> <p>Default: this will use the default AWS credentials chain to authenticate with AWS.</p> <pre><code>credentials:\n   type: \"default\"\n</code></pre> </li> <li> <p>Profile: uses the configured profile to authenticate with AWS. The chosen profile needs to be configured in <code>~/.aws/credentials</code>.</p> <pre><code>credentials:\n   type: \"profile\"\n   name: \"my-profile\"\n</code></pre> </li> <li> <p>Static: uses the statically set keys to authenticate with AWS. The keys themselves can be secrets resolved at runtime by the secrets provider.</p> <pre><code>credentials:\n   type: \"static\"\n   accessKey: \"accessKey\"\n   secretAccessKey: \"secretAccessKey\"\n</code></pre> </li> </ol>"},{"location":"advanced/runners/lambda/#how-to-deal-with-an-unsupported-authentication-method","title":"How to deal with an unsupported authentication method","text":"<p>There are currently a bunch of other authentication methods that zoe doesn't support yet. Few examples are: MFA in the command line, the new AWS Single Sign On, etc.</p> <p>If you are dealing with such an unsupported authentication method, you can easily workaround it by generating an STS session and let zoe make use it. To make the process seamless, you can use the awesome AWS Vault that makes it almost transparent. </p> <p>For zoe to be able to discover STS sessions, you need to use the default credentials type:</p> <pre><code>runners:\n  default: lambda\n  config:\n    lambda:\n      credentials:\n        type: \"default\"\n      ...\n</code></pre> <p>You can use AWS Vault to make generating STS sessions transparent with zoe by using:</p> Command <pre><code>aws-vault exec my-aws-profile-with-sso -- zoe topics list\n</code></pre> <p>You can even simplify the process further by creating an alias:</p> <pre><code># Create an alias\nalias zoe-pro='aws-vault exec my-aws-profile-with-sso -- zoe'\n\n# Use it here\nzoe-pro topics list\n</code></pre>"},{"location":"advanced/runners/local/","title":"Local runner","text":"<p>The local runner launches the consumer / producers in the same JVM process as the zoe CLI.</p> <p>This should be used when consuming from a local kafka cluster. It can also be used against a remote kafka cluster if it's reachable from the local machine.</p> <p>The local runner can be selected using :</p> <pre><code>zoe -c my-cluster -r local topics consume input -n 10\n</code></pre>"},{"location":"advanced/runners/overview/","title":"Zoe runners","text":"<p>When using commands like <code>zoe consume</code>, zoe has the ability to run the Kafka consumers remotely in kubernetes pods and seamlessly get the responses back to the CLI. It can do the same with all the other commands that require interaction with Kafka. This behavior is possible thanks to Zoe's concept of runners.</p> <p>Zoe currently supports 3 runners :</p> <ul> <li>Local runner: Launches the consumers / producers on the same JVM process as the zoe CLI.</li> <li>Kubernetes runner: Launches the consumers / producers as pods on a remote kubernetes cluster.</li> <li>Lambda runner: Launches the consumers / producers on a pre-deployed lambda functions. Zoe can deploy this lambda itself.</li> </ul> <p>A specific runner can be selected using the <code>--runner</code> or <code>-r</code> option :</p> CommandOutput <pre><code>zoe -c my-cluster --runner kubernetes topics consume input -n 5\n</code></pre> <pre><code>{\"_id\":\"5b199196ce456e001424256a\",\"text\":\"Cats can distinguish different flavors in water.\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":6,\"userUpvoted\":null}\n{\"_id\":\"5b1b411d841d9700146158d9\",\"text\":\"The Egyptian Mau\u2019s name is derived from the Middle...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":5,\"userUpvoted\":null}\n{\"_id\":\"591d9b2f227c1a0020d26823\",\"text\":\"Every year, nearly four million cats are eaten in ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"_id\":\"59951d5ef2db18002031693c\",\"text\":\"America\u2019s cats, including housecats that adventure...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"_id\":\"5a4d76916ef087002174c28b\",\"text\":\"A cat\u2019s nose pad is ridged with a unique pattern, ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n</code></pre> <p>The command above offloads the consumption of the topic to a kubernetes pod. The result will seamlessly be output by the CLI as if the runner was local.</p> <p>Runners configuration is set in zoe's configuration file in the <code>runners</code> section:</p> <pre><code>runners:\n  default: lambda\n  config:\n    kubernetes:\n      context: mu-kube-context\n      namespace: env-staging\n    lambda:\n      deploy:\n        subnets: [\"subnet-xxxxxxx\"]\n        securityGroups: [\"sg-yyyyyyy\"]\n        memory: 512\n        timeout: 500\n      credentials:\n        type: \"profile\"\n        name: \"spt-tranquility-pre\"\n      awsRegion: eu-west-1\n</code></pre>"},{"location":"advanced/secrets/awssm/","title":"AWS Secrets manager provider","text":"<p>This secrets provider fetches secret values from AWS Secrets Manager.</p> <p>To use the AWS Secrets Manager provider, add the following in zoe's configuration :</p> <pre><code>secrets:\n  provider: awsSecretsManager\n  region: eu-west-1  # Optional\n</code></pre> <p>Using the configuration above, when zoe encounters <code>secret:JAAS_CONFIG</code>, it looks up a secret named <code>JAAS_CONFIG</code> from AWS Secrets Manager.</p>"},{"location":"advanced/secrets/awssm/#supported-credentials","title":"Supported credentials","text":"<p>The AWS Secrets Manager provider needs to authenticate to AWS. By default, it uses the AWS default credentials chain. But this can be overridden in the <code>credentials</code> section of the provider config. The same credentials types as the lambda credentials are supported:</p> Profile credentialsstatic <pre><code>secrets:\n  provider: \"awsSecretsManager\"\n  region: \"eu-west-1\"\n  credentials:\n    type: \"profile\"\n    name: \"my-customr-profile\"\n</code></pre> <pre><code>secrets:\n  provider: \"awsSecretsManager\"\n  region: \"eu-west-1\"\n  credentials:\n    type: \"static\"\n    accessKey: \"accessKey\"\n    secretAccessKey: \"secretAccessKey\"\n</code></pre> <p>If your authentication mode is not supported, you can generate an STS session and use the \"default\" credentials so that zoe uses this STS session. You can take a look at the lambda runner credentials section to know more about how to achieve that.</p>"},{"location":"advanced/secrets/envvars/","title":"Environment variables secrets provider","text":"<p>This secrets provider looks up secret values from the environment.</p> <p>When zoe encounters <code>secret:SECRET_NAME</code> in the configuration, this provider searches for an environment variable named <code>SECRET_NAME</code>.</p> <p>The name of the environment variable to look for can be altered using the <code>append</code> or <code>prepend</code> config properties :</p> <pre><code>secrets:\n    provider: env\n    append: ZOE_SECRET\n    prepend: _PRO\n</code></pre> <p>In the configuration above, when zoe encounters <code>secret:JAAS_CONFIG</code>, this provider looks up for an environment variable named <code>ZOE_SECRET_JAAS_CONFIG_PRO</code>.</p> <p>The <code>append</code> and <code>prepend</code> properties are useful when using the same secret name across different zoe environment files. Here is a typical example of a <code>staging.yml</code> and a <code>prod.yml</code> file:</p> staging.ymlprod.yml <pre><code>secrets:\n    provider: env\n    append: ZOE_SECRET\n    prepend: _STAGING\n\nclusters:\n\n  my-kafka-cluster:\n    props:\n      bootstrap.servers: my-kafka-cluster-staging.example.com:9092\n      security.protocol: SASL_SSL\n      sasl.mechanism: SCRAM-SHA-256\n      sasl.jaas.config: secret:JAAS_CONFIG\n</code></pre> <pre><code>secrets:\n    provider: env\n    append: ZOE_SECRET\n    prepend: _PROD\n\nclusters:\n\n  my-kafka-cluster:\n    props:\n      bootstrap.servers: my-kafka-cluster-production.example.com:9092\n      security.protocol: SASL_SSL\n      sasl.mechanism: SCRAM-SHA-256\n      sasl.jaas.config: secret:JAAS_CONFIG\n</code></pre> <p>In this case :</p> <ul> <li>when using <code>zoe -e staging ...</code>, the <code>JAAS_CONFIG</code> secret wil be retrieved from the environment variable <code>ZOE_SECRET_JAAS_CONFIG_STAGING</code>.</li> <li>when using : <code>zoe -e prod ...</code>, the <code>JAAS_CONFIG</code> secret wil be retrieved from the environment variable <code>ZOE_SECRET_JAAS_CONFIG_PROD</code>.</li> </ul>"},{"location":"advanced/secrets/exec/","title":"Command based secret provider","text":"<p>If none of the supported secrets provider fits your use case, Zoe provides a generic secrets provider that delegates secrets deciphering to a custom command.</p> <p>You can use this provider by adding the following to your zoe config:</p> <pre><code>secrets:\n  provider: exec\n  command: [ \"command\", \"{secretName}\" ]\n  timeoutMs: 30000  # default is: 60000\n</code></pre> <p>This provider catches all secrets in your configuration properties that are in the format: <code>secret:SECRET_NAME</code> or <code>secret:CONTEXT:SECRET_NAME</code> and allows you to use the captured <code>SECRENT_NAME</code> and <code>CONTEXT</code> fields in your command by using the <code>{secretName}</code> and <code>{context}</code> pattern (cf. The example above).</p>"},{"location":"advanced/secrets/exec/#example","title":"Example","text":"<p>Suppose you have the following configuration:</p> default.yml <pre><code>secrets:\n    provider: exec\n    command: [ \"/fetch-secret.sh\", \"{context}\", \"{secretName}\" ]\n\nclusters:\n\n  my-kafka-cluster:\n    props:\n      bootstrap.servers: my-kafka-cluster-staging.example.com:9092\n      security.protocol: SASL_SSL\n      sasl.mechanism: SCRAM-SHA-256\n      sasl.jaas.config: secret:pro:JAAS_CONFIG\n</code></pre> <p>When using the <code>zoe -c my-kafka-cluster consume topics -n 10</code>, zoe will detect the <code>secret:pro:JAAS_CONFIG</code> string and tries to replace with the output of the following command:</p> <pre><code>/fetch-secret.sh \"PRO\" \"JAAS_CONFIG\"\n</code></pre>"},{"location":"advanced/secrets/overview/","title":"Secrets providers","text":"<p>Zoe allows you to use secrets in the configuration files without exposing their values. The secret values are resolved at runtime by zoe via secrets providers. This mechanism makes configuration files more easily shareable among the team using git repositories.</p> <p>Secrets in zoe's configuration files usually take the form of <code>secret:SECRET_NAME</code>. Some providers can also require the longer form of <code>secret:CONTEXT:SECRET_NAME</code> to provide an additional context to secrets provider.</p> <p>A typical use case for using secrets and secrets providers is when dealing with a kafka cluster protected behind a SASL authentication. In this scenario, to interact with the cluster (to consume or produce data) we need to supply credentials in the clients properties (Notice the <code>sasl.jaas.config</code>):</p> <pre><code>clusters:\n\n  my-kafka-cluster:\n    props:\n      bootstrap.servers: my-kafka-cluster.example.com:9092\n      security.protocol: SASL_SSL\n      sasl.mechanism: SCRAM-SHA-256\n      sasl.jaas.config: org.apache.kafka.common.security.scram.ScramLoginModule required username=\"my-ser\" password=\"my-password\";\n      ...\n\n...\n</code></pre> <p>Storing credentials that way in the configuration file makes it not easily shareable among the team in git repositories or kubernetes config maps.</p> <p>To improve this, we can use zoe's support for secrets:</p> <pre><code>clusters:\n\n  my-kafka-cluster:\n    props:\n      bootstrap.servers: my-kafka-cluster.example.com:9092\n      security.protocol: SASL_SSL\n      sasl.mechanism: SCRAM-SHA-256\n      sasl.jaas.config: secret:JAAS_CONFIG\n      ...\n\nsecrets:\n  provider: env\n...\n</code></pre> <p>When zoe encounters <code>secret:JAAS_CONFIG</code>, it uses the configured secrets provider to search for a secret named <code>JAAS_CONFIG</code> and uses its value to replace <code>secret:JAAS_CONFIG</code>.</p> <p>Zoe currently supports the following secrets provider (more may be supported in the future) :</p> <ul> <li>Environment variables secrets provider: Looks up secret values from the environment.</li> <li>AWS Secrets Manager provider: Fetches secrets from AWS Secrets Manager.</li> <li>Exec provider: Uses a custom script to resolve secrets. Use this provider if none of the above providers   fits your use case.</li> </ul>"},{"location":"advanced/secrets/strongbox/","title":"Strongbox secrets provider","text":""},{"location":"advanced/secrets/strongbox/#deprecated","title":"Deprecated","text":"<p>As strongbox is being deprecated by their creators, we are no longer providing support for strongbox as a secret provider in Zoe.</p>"},{"location":"basics/consume/","title":"Consuming data","text":"<p>In this step, we will learn more about the <code>consume</code> command by reading the data produced during the previous section.</p>"},{"location":"basics/consume/#prerequisites","title":"Prerequisites","text":"<p>You should have completed the two previous steps :</p> <ul> <li>Prepare the environment</li> <li>Producing data</li> </ul>"},{"location":"basics/consume/#consuming-data_1","title":"Consuming data","text":"<p>To consume data from the <code>input</code> topic (alias of the <code>input-topic</code>), use the following command :</p> CommandOutput <pre><code>zoe -v --cluster local topics consume input\n</code></pre> <pre><code>{\"_id\":\"5b199196ce456e001424256a\",\"text\":\"Cats can distinguish different flavors in water.\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":6,\"userUpvoted\":null}\n{\"_id\":\"5b1b411d841d9700146158d9\",\"text\":\"The Egyptian Mau\u2019s name is derived from the Middle...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":5,\"userUpvoted\":null}\n{\"_id\":\"591d9b2f227c1a0020d26823\",\"text\":\"Every year, nearly four million cats are eaten in ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"_id\":\"59951d5ef2db18002031693c\",\"text\":\"America\u2019s cats, including housecats that adventure...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"_id\":\"5a4d76916ef087002174c28b\",\"text\":\"A cat\u2019s nose pad is ridged with a unique pattern, ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n</code></pre> <p>By default, zoe consumes 5 records starting from the last hour.</p>"},{"location":"basics/consume/#displaying-records-metadata","title":"Displaying records metadata","text":"<p>To display the records' metadata (record headers, key, offset, timestamp, partition, topic), use the <code>--expose-metadata</code> option to make zoe inject records metadata in a special field named <code>__metadata__</code> by default.</p> CommandOutput <pre><code>zoe -v --cluster local topics consume input -n 5 --expose-metadata\n</code></pre> <pre><code>{\"__metadata__\": {\"key\":\"5b199196ce456e001424256a\", \"offset\":1, \"timestamp\":1596700800645, \"partition\":0, \"topic\":\"input\",\"headers\":{\"traceId\":\"3b3ae7fa-2a8b-494b-a81c-1c759a479867\"}},\"content\":{\"_id\":\"5b199196ce456e001424256a\",\"text\":\"Cats can distinguish different flavors in water.\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":6,\"userUpvoted\":null}\n{\"__metadata__\": {\"key\":\"5b1b411d841d9700146158d9\", \"offset\":2, \"timestamp\":2596700800645, \"partition\":0, \"topic\":\"input\",\"headers\":{\"traceId\":\"4b3ae7fa-2a8b-494b-a81c-1c759a479867\"}},\"content\":{\"_id\":\"5b1b411d841d9700146158d9\",\"text\":\"The Egyptian Mau\u2019s name is derived from the Middle...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":5,\"userUpvoted\":null}\n{\"__metadata__\": {\"key\":\"591d9b2f227c1a0020d26823\", \"offset\":3, \"timestamp\":3596700800645, \"partition\":0, \"topic\":\"input\",\"headers\":{\"traceId\":\"5b3ae7fa-2a8b-494b-a81c-1c759a479867\"}},\"content\":{\"_id\":\"591d9b2f227c1a0020d26823\",\"text\":\"Every year, nearly four million cats are eaten in ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"__metadata__\": {\"key\":\"59951d5ef2db18002031693c\", \"offset\":1, \"timestamp\":4596700800645, \"partition\":1, \"topic\":\"input\",\"headers\":{\"traceId\":\"6b3ae7fa-2a8b-494b-a81c-1c759a479867\"}},\"content\":{\"_id\":\"59951d5ef2db18002031693c\",\"text\":\"America\u2019s cats, including housecats that adventure...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n{\"__metadata__\": {\"key\":\"5a4d76916ef087002174c28b\", \"offset\":2, \"timestamp\":5596700800645, \"partition\":1, \"topic\":\"input\",\"headers\":{\"traceId\":\"7b3ae7fa-2a8b-494b-a81c-1c759a479867\"}},\"content\":{\"_id\":\"5a4d76916ef087002174c28b\",\"text\":\"A cat\u2019s nose pad is ridged with a unique pattern, ...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n</code></pre>"},{"location":"basics/consume/#controlling-the-time-range","title":"Controlling the time range","text":"<p>We can control the number of output records (<code>-n</code>) and the starting time of the consumption (<code>--from</code>).</p> <p>For example, to start the consumption from the last 6 hours and read only 2 records:</p> CommandOutput <pre><code>zoe -v --cluster local topics consume input -n 2 --from 'PT6h'\n</code></pre> <pre><code>{\"_id\":\"5b199196ce456e001424256a\",\"text\":\"Cats can distinguish different flavors in water.\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":6,\"userUpvoted\":null}\n{\"_id\":\"5b1b411d841d9700146158d9\",\"text\":\"The Egyptian Mau\u2019s name is derived from the Middle...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":5,\"userUpvoted\":null}\n</code></pre> <p>The <code>--from</code> option takes a duration in ISO-8601 format.</p>"},{"location":"basics/consume/#selecting-a-subset-of-the-fields","title":"Selecting a subset of the fields","text":"<p>We can format the output rows by using the <code>--query</code> option and giving it a jmespath expression . Zoe will run this Jmespath expression against each message and the result will be output instead of the original message itself. A typical use case is when we want only a subset of the existing fields:</p> CommandOutput <pre><code>zoe -v --cluster local \\\n       topics consume input \\\n       --query '{id: _id, text: text, user: user.name}'\n</code></pre> <pre><code>{\"id\":\"5b199196ce456e001424256a\",\"text\":\"Cats can distinguish different flavors in water.\",\"user\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}}\n{\"id\":\"5b1b411d841d9700146158d9\",\"text\":\"The Egyptian Mau\u2019s name is derived from the Middle...\",\"user\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}}\n{\"id\":\"591d9b2f227c1a0020d26823\",\"text\":\"Every year, nearly four million cats are eaten in ...\",\"user\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}}\n{\"id\":\"59951d5ef2db18002031693c\",\"text\":\"America\u2019s cats, including housecats that adventure...\",\"user\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}}\n{\"id\":\"5a4d76916ef087002174c28b\",\"text\":\"A cat\u2019s nose pad is ridged with a unique pattern, ...\",\"user\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}}\n</code></pre>"},{"location":"basics/consume/#pretty-display","title":"Pretty display","text":"<p>Zoe can display the consumed data in a nicely formatted table by using the <code>--output table</code> option:</p> CommandOutput <pre><code>zoe -v --cluster local \\\n       --output table \\\n       topics consume input \\\n       --query '{id: _id, text: text, user: user.name}'\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 id                       \u2502 text                                                  \u2502 user              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5b199196ce456e001424256a \u2502 Cats can distinguish different flavors in water.      \u2502 first: \"Alex\"     \u2502\n\u2502                          \u2502                                                       \u2502 last: \"Wohlbruck\" \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5b1b411d841d9700146158d9 \u2502 The Egyptian Mau\u2019s name is derived from the Middle... \u2502 first: \"Alex\"     \u2502\n\u2502                          \u2502                                                       \u2502 last: \"Wohlbruck\" \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 591d9b2f227c1a0020d26823 \u2502 Every year, nearly four million cats are eaten in ... \u2502 first: \"Alex\"     \u2502\n\u2502                          \u2502                                                       \u2502 last: \"Wohlbruck\" \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 59951d5ef2db18002031693c \u2502 America\u2019s cats, including housecats that adventure... \u2502 first: \"Alex\"     \u2502\n\u2502                          \u2502                                                       \u2502 last: \"Wohlbruck\" \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5a4d76916ef087002174c28b \u2502 A cat\u2019s nose pad is ridged with a unique pattern, ... \u2502 first: \"Alex\"     \u2502\n\u2502                          \u2502                                                       \u2502 last: \"Wohlbruck\" \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>We can also use the <code>--output json</code> to output a valid json instead of a json per row :</p> CommandOutput <pre><code>zoe -v --cluster local \\\n       --output json \\\n       topics consume input \\\n       --query '{id: _id, text: text, user: user.name}' \\\n       -n 2\n</code></pre> <pre><code>[\n    {\n        \"id\": \"5b199196ce456e001424256a\",\n        \"text\": \"Cats can distinguish different flavors in water.\",\n        \"user\": {\n            \"first\": \"Alex\",\n            \"last\": \"Wohlbruck\"\n        }\n    },\n    {\n        \"id\": \"5b1b411d841d9700146158d9\",\n        \"text\": \"The Egyptian Mau\u2019s name is derived from the Middle...\",\n        \"user\": {\n            \"first\": \"Alex\",\n            \"last\": \"Wohlbruck\"\n        }\n    }\n]\n</code></pre> <p>These display options are not only availabe for the <code>consume</code>. They are available for all the zoe commands. In fact, Zoe can consistently display all its output as a table.</p>"},{"location":"basics/consume/#filtering-data-based-on-content","title":"Filtering data based on content","text":"<p>Zoe can also use Jmespath expressions that return a boolean to filter the output messages. Zoe runs this expression against each message and depending on the boolean result, zoe will discard the message or not.</p> <p>This feature can be used to perform searches into Kafka topics. It is one of the most interesting features of Zoe. When combined with remote runners (ex. <code>--runner kubernetes</code>) and parallel execution (<code>--jobs 20</code> to spin up 20 pods), we can perform expensive searches in large topics in a relatively short amount of time. You can learn more about runners and parallel execution in the advanced section of the documentation.</p> <p>Filters are enabled with the <code>--filter</code> option. For example, to read only Kasimir's cat facts :</p> CommandOutput <pre><code>zoe -v --cluster local \\\n    topics consume input \\\n    --from 'PT6h' \\\n    --filter \"user.name.first == 'Kasimir'\" \\\n    --query '{user: user.name, text: text}'\n</code></pre> <pre><code>{\"user\":{\"first\":\"Kasimir\",\"last\":\"Schulz\"},\"text\":\"Cats are the most popular pet in the United States...\"}\n{\"user\":{\"first\":\"Kasimir\",\"last\":\"Schulz\"},\"text\":\"In tigers and tabbies, the middle of the tongue is...\"}\n{\"user\":{\"first\":\"Kasimir\",\"last\":\"Schulz\"},\"text\":\"A cat can jump up to six times its length.\"}\n{\"user\":{\"first\":\"Kasimir\",\"last\":\"Schulz\"},\"text\":\"There are cats who have survived falls from over 3...\"}\n{\"user\":{\"first\":\"Kasimir\",\"last\":\"Schulz\"},\"text\":\"The technical term for \\\"hairball\\\" is \\\"bezoar.\\\"\"}\n</code></pre> <p>If we are dealing with a large topic and want to search for seven days of data, we can offload the consumption to kubernetes and spin up 25 pods to consume data in parallel using the following command :</p> Command <pre><code>zoe --cluster my-production-cluster \\\n    --runner kubernetes \\\n    topics consume input \\\n    --from 'P7d' \\\n    --filter \"user.name.first == 'Kasimir'\" \\\n    --jobs 25\n</code></pre> <p>This command will not work as is on your computer at this stage because this requires additional work to configure access to a kubernetes cluster with zoe. But there is a tutorial available in this documentation to try out zoe with a kubernetes cluster using Minikube.</p>"},{"location":"basics/consume/#filtering-data-based-on-metadata","title":"Filtering data based on metadata","text":"<p>Zoe by default exposes only records content. You can use the <code>--expose-metadata</code> flag to expose the record's metadata as well in a special field maned <code>__metadata__</code> by default. This field can be accessed as any other field in the <code>--filter</code> expressions to filter records based on metadata content, as well as <code>--query</code> expressions.</p> <p>The example below shows how to filter records on a given offset and partition:</p> CommandOutput <pre><code>zoe -v --cluster local topics consume input --expose-metadata --filter \"__metadata__.offset == \\`1\\` &amp;&amp; __metadata__.partition == \\`1\\`\"\n</code></pre> <pre><code>{\"__metadata__\": {\"key\":\"59951d5ef2db18002031693c\", \"offset\":1, \"timestamp\":4596700800645, \"partition\":1, \"topic\":\"input\",\"headers\":{\"traceId\":\"6b3ae7fa-2a8b-494b-a81c-1c759a479867\"}},\"content\":{\"_id\":\"59951d5ef2db18002031693c\",\"text\":\"America\u2019s cats, including housecats that adventure...\",\"type\":\"cat\",\"user\":{\"_id\":\"5a9ac18c7478810ea6c06381\",\"name\":{\"first\":\"Alex\",\"last\":\"Wohlbruck\"}},\"upvotes\":4,\"userUpvoted\":null}\n</code></pre> <p>The name of the injected metadata field can be modified using <code>--metadataf-field-alias</code> option.</p> <p>Record headers can also be used for filtering. The following command show an example of filtering records based on header values:</p> Command <pre><code>zoe --cluster local topics consume input \\\n    --expose-metadata --metadata-field-alias 'meta' \\\n    --filter \"meta.headers.traceId == '123123'\"\n</code></pre>"},{"location":"basics/operations/","title":"Operations","text":"<p>Zoe can do much more than just producing and consuming data from Kafka. In this section, you will find examples of some additional capabilities of zoe.</p>"},{"location":"basics/operations/#interacting-with-consumer-groups","title":"Interacting with consumer groups","text":"<p>Fetch the offsets and lags of a specific consumer group :</p> CommandOutput <pre><code>zoe -o table -v -c my-cluster groups offsets my-consumer-group-name\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 topic    \u2502 partition \u2502 currentOffset \u2502 endOffset \u2502 lag \u2502 metadata \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 3         \u2502 49993793      \u2502 49993793  \u2502 0   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 4         \u2502 50275990      \u2502 50275991  \u2502 1   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 1         \u2502 50155761      \u2502 50155762  \u2502 1   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 2         \u2502 50212574      \u2502 50212574  \u2502 0   \u2502          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-topic \u2502 0         \u2502 50027346      \u2502 50027347  \u2502 1   \u2502          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Consumer groups can also be given aliases in zoe's configuration. This is done in the <code>groups</code> section inside the cluster configuration. Refer to the configuration reference section.</p> <p>Use <code>zoe groups --help</code> for additional commands and examples to interact with consumer groups.</p>"},{"location":"basics/operations/#interacting-with-the-avro-schema-registry","title":"Interacting with the Avro Schema Registry","text":"<p>List avro schemas :</p> CommandOutput <pre><code>zoe -o table -v -c my-cluster schemas list\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 subjects          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 input-topic-value \u2502\n\u2502 input-topic-key   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Describe a schema :</p> CommandOutput <pre><code>zoe -o json -v -c my-cluster schemas describe input-topic-value\n</code></pre> <pre><code>{\n  \"subject\": \"input-topic-value\",\n  \"versions\": [2],\n  \"latest\": \"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"my-schema\\\",\\\"namespace\\\":\\\"com.adevinta.example\\\",\\\"fields\\\":[...]}\"\n}\n</code></pre> <p>Deploy avro schema using an <code>.avdl</code> file :</p> Command <pre><code>zoe -c my-cluster \\\n    schemas deploy \\\n    --avdl \\\n    --from-file schema.avdl \\\n    --name ModuleReason \\\n    --strategy topicRecord --topic input\n</code></pre> <p>Use <code>zoe schemas --help</code> for additional commands and help on interacting with schemas.</p>"},{"location":"basics/overview/","title":"Getting started","text":"<p>This getting started guide will show you step by step how to efficiently use zoe to interact with your kafka clusters.</p> <p>In summary, this guide includes the following steps :</p> <ul> <li>Prepare the environment: We will start by setting up the stage by spinning up a single node kafka cluster locally initialized with some topics. We will then configure zoe to make it know about this cluster to start interacting with it.</li> <li>Producing data into topics: We will use zoe to write some json data into Kafka. The dataset used is a funny one from the Cat Facts API.</li> <li>Reading data from topics: You will see the basics of reading data with zoe. We will cover the filtering basics, formatting and pretty printing. This part will hover over some of the most powerful features of zoe... </li> </ul> <p>Ready to start ? Jump in to the next section !</p>"},{"location":"basics/prepare/","title":"Prepare the environment","text":"<p>In this step, we will spin up a single node kafka cluster with docker and docker compose. This cluster will be initialized with some topics created by an initializer script.</p> <p>We will then create the required zoe configuration to point to this cluster so we can start interacting with it.</p>"},{"location":"basics/prepare/#prerequisites","title":"Prerequisites","text":"<p>For this tutorial you will need :</p> <ul> <li>Zoe (follow the install instructions here)</li> <li>Docker and docker-compose</li> </ul>"},{"location":"basics/prepare/#spin-up-the-kafka-cluster","title":"Spin up the Kafka cluster","text":"<p>Clone the zoe repository and use the provided compose file to spin up the kafka cluster :</p> <pre><code># clone the repo\ngit clone https://github.com/adevinta/zoe.git\n\n# go to the guides folder\ncd zoe/docs/guides/simple\n\n# spin up the stack\ndocker-compose up -d\n</code></pre> <p>Now you should have :</p> <ul> <li>A zookeeper node</li> <li>A kafka node</li> <li>2 topics created : <code>input-topic</code> and <code>another-topic</code></li> </ul> <p>Now let's go to the next step and configure zoe to point to this cluster.</p>"},{"location":"basics/prepare/#configuring-zoe","title":"Configuring zoe","text":"<p>Zoe uses a central configuration file to store all the information related to the kafka clusters we may interact with. This file keeps all the cluster properties (<code>bootstrap.servers</code>, etc.) and topics configuration so we don't have to repeat them again and again each time we want to interact with the cluster.</p> <p>We can easily initialize a default configuration file using :</p> Command <pre><code>zoe -v config init\n</code></pre> Logs <pre><code>2020-03-07 01:43:16 INFO zoe: creating a new config file...\n</code></pre> <p>This creates a default configuration file at <code>~/.zoe/config/default.yml</code> that can be used as a starting point. The file looks like the following (some optional fields have been omitted for readability):</p> <pre><code>clusters:\n\n  local:\n    props:\n      bootstrap.servers: \"localhost:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\nrunners:\n  default: \"local\"\n</code></pre> <p>This config file defines the following elements :</p> <ul> <li>A <code>clusters</code> section where all the kafka clusters configuration are defined. Each cluster configuration is keyed by an alias. In the configuration above, a single kafka cluster configuration aliased by <code>local</code> is defined in the above config. This alias is what we will use to refer to this cluster when using <code>zoe --cluster local</code>. Each cluster configuration defines:<ul> <li>A <code>props</code> section that represent the set of properties to be injected to the kafka clients when interacting with the cluster.</li> <li>A <code>topics</code> section that contain a list of topic configuration keyed by an alias. In the configuration above, one topic configuration is defined with the alias <code>input</code>. A topic configuration contains the real name of the topic (in this case <code>input-topic</code>) and optionally a subject name if the topic is an avro topic. This alias is what we will use to refer to the topic when targeting it for writing or reading in zoe. This relieves us from the difficulty of dealing with and remembering long topic names.</li> </ul> </li> <li>Lastly, there is a <code>runners</code> section that defines the <code>local</code> runner as the default. We will talk more about runners in the advanced section of this documentation but keep in mind that zoe offloads the consumption and the interaction with kafka clusters to \"runners\" that can either be local or remote (lambda functions or kubernetes pods).</li> </ul> <p>The default generated configuration is already enough to interact with our locally spinned up kafka cluster. We should be able to start interacting with it without any change.</p> <p>Let's use zoe to list the available topics :</p> Command <pre><code>zoe --cluster local topics list\n</code></pre> Output <pre><code>[\"input-topic\", \"another-topic\"]\n</code></pre> <p>We can see that there is 2 topics within our cluster. To avoid having to remember their names, let's add them in the configuration and give them a friendly alias:</p> <pre><code>clusters:\n\n  local:\n    props:\n      bootstrap.servers: \"localhost:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n    topics:\n      input:\n        name: \"input-topic\"\n      another:\n        name: \"another-topic\"\n\nrunners:\n  default: \"local\"\n</code></pre> <p>Now that our configuration is ready, let's use zoe to produce some test data into the cluster.</p>"},{"location":"basics/produce/","title":"Producing data","text":"<p>In this step, we are going to use zoe to write some json data into Kafka.</p>"},{"location":"basics/produce/#prerequisites","title":"Prerequisites","text":"<ul> <li>You should have completed the previous step : Prepare the environment</li> </ul>"},{"location":"basics/produce/#producing-data_1","title":"Producing data","text":"<p>There are multiple ways to write json data to a Kafka cluster using zoe. </p>"},{"location":"basics/produce/#write-data-from-stdin","title":"Write data from stdin","text":"<p>The simplest way is to inject the data from stdin :</p> CommandOutputLogs <pre><code>echo '[{\"msg\": \"hello world\"}]' | zoe -v --cluster local topics produce --topic input --from-stdin\n</code></pre> <pre><code>{\n    \"produced\": [\n        {\n            \"offset\": 2,\n            \"partition\": 0,\n            \"topic\": \"input-topic\",\n            \"timestamp\": 1583483283555\n        }\n    ],\n    \"skipped\": []\n}\n</code></pre> <pre><code>2020-03-06 09:28:02 INFO zoe: loading config from url : file: ~/.zoe/config/default.yml\n2020-03-06 09:28:03 INFO zoe: producing '1' records to topic 'input-topic'\n2020-03-06 09:28:03 INFO AppInfoParser: Kafka version: 2.3.1\n2020-03-06 09:28:03 INFO AppInfoParser: Kafka commitId: 18a913733fb71c01\n2020-03-06 09:28:03 INFO AppInfoParser: Kafka startTimeMs: 1583483283410\n2020-03-06 09:28:03 INFO Metadata: [Producer clientId=producer-1] Cluster ID: y50BSUG2RzipAYoKITJuQg\n2020-03-06 09:28:03 INFO KafkaProducer: [Producer clientId=producer-1] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.\n</code></pre> <p>Zoe expects a valid json array as input from stdin. It iterates over the elements and writes them one by one to the target topic: the topic aliased <code>input</code> in this case. Remember that the alias <code>input</code> was given to the <code>input-topic</code> in zoe's configuration in the previous section.</p> <p>Now, we can check the data we have just written by using the <code>consume</code> command (we will learn more about the <code>consume</code> command in the next section) :</p> CommandOutput <pre><code>zoe -v --cluster local topics consume input -n 1\n</code></pre> <pre><code>{\"msg\": \"hello world\"}\n</code></pre> <p>We can have more information about the message key, offset and timestamp by adding the <code>--verbose</code> flag </p> CommandOutput <pre><code>zoe -v --cluster local topics consume input -n 1 --verbose\n</code></pre> <pre><code>{\n    \"key\": \"2d57d220-7340-4c0c-ab66-fd51c0157cae\",\n    \"offset\": 2,\n    \"timestamp\": 1583483283555,\n    \"partition\": 0,\n    \"topic\": \"input-topic\",\n    \"formatted\": {\n        \"msg\": \"hello world\"\n    }\n}\n</code></pre> <p>Notice that the message key is a generated UUID. By default, zoe generates UUID keys when writing messages into kafka. We can make it instead pick the key from a field in the message with the <code>--key-path</code> option:</p> CommandOutput <pre><code>echo '[{\"id\": \"1\", \"msg\": \"hello world\"}]' | zoe -v --cluster local topics produce --topic input --from-stdin --key-path 'id'\n</code></pre> <pre><code>{\n    \"produced\": [\n        {\n            \"offset\": 3,\n            \"partition\": 0,\n            \"topic\": \"input-topic\",\n            \"timestamp\": 1583488726267\n        }\n    ],\n    \"skipped\": []\n}\n</code></pre> <p>The key path option argument is a Jmespath expression that is executed against each input message. The result of the expression will be used as the record's key. It is also possible to do the same to set the messages timestamp with the <code>--ts-path</code>. Use <code>zoe topics produce --help</code> for more information.</p>"},{"location":"basics/produce/#write-data-from-a-json-file","title":"Write data from a json file","text":"<p>The other way to write data into Kafka with zoe is to use a json file.</p> <p>The following example uses a sample dataset downloaded from the cats facts API. You can inspect the sample in the repository at guides/simple/data.json.</p> <p>Let's write this json file into the <code>input</code> topic.</p> CommandLogsOutput <pre><code>zoe -v topics produce --topic input --from-file docs/guides/simple/data.json\n</code></pre> <pre><code>2020-03-06 11:07:18 INFO zoe: loading config from url : file:~/.zoe/config/default.yml\n2020-03-06 11:07:18 INFO zoe: producing '212' records to topic 'input-topic'\n2020-03-06 11:07:18 INFO AppInfoParser: Kafka version: 2.3.1\n2020-03-06 11:07:18 INFO AppInfoParser: Kafka commitId: 18a913733fb71c01\n2020-03-06 11:07:18 INFO AppInfoParser: Kafka startTimeMs: 1583489238910\n2020-03-06 11:07:19 INFO Metadata: [Producer clientId=producer-1] Cluster ID: y50BSUG2RzipAYoKITJuQg\n2020-03-06 11:07:19 INFO KafkaProducer: [Producer clientId=producer-1] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.\n</code></pre> <pre><code>{\n    \"produced\": [\n        {\n            \"offset\": 4,\n            \"partition\": 0,\n            \"topic\": \"input-topic\",\n            \"timestamp\": 1583489239047\n        },\n        {\n            \"offset\": 5,\n            \"partition\": 0,\n            \"topic\": \"input-topic\",\n            \"timestamp\": 1583489239054\n        },\n        ...\n    ],\n    \"skipped\": []\n}\n</code></pre> <p>You can know more about the <code>produce</code> command with <code>zoe topics produce --help</code>. </p>"},{"location":"basics/produce/#writing-data-in-streaming-mode","title":"Writing data in streaming mode","text":"<p>In all the examples above, zoe was expecting a valid json array as input. This is because zoe parses the input data (from stdin or from a file) entirely before sending it to Kafka. This is the default behavior of the <code>produce</code> command.</p> <p>This behavior is not suitable when streaming data to the <code>zoe produce</code> command from a continuous data source (ex. a tcp connection or an http command) because:</p> <ul> <li>The data is usually not formatted as a Json Array. It's often rather a json per line.</li> <li>We do not want zoe to buffer all the data internally before sending it.</li> </ul> <p>For these cases, Zoe supports a streaming mode by setting a <code>--streaming</code> flag. In this mode :</p> <ul> <li>Zoe expects one valid json object per line (separated by line breaks)</li> <li>Zoe will keep listening to the input stream continuously. It needs to be stopped using a stop signal (<code>Ctrl-C</code>).</li> </ul> <p>Streaming mode can be enabled like the following :</p> Command <pre><code>echo '{\"msg\": \"hello world\"}' | zoe -v --cluster local topics produce --topic input --from-stdin --streaming\n</code></pre>"},{"location":"configuration/chain/","title":"Configuration loading chain","text":"<p>Zoe has a complex and powerful configuration override chain that makes it highly configurable.</p> <p>Zoe configuration properties are considered in the following order (in a decreasing order of priority):</p> <ol> <li><code>ZOE_CONFIG_OVERRIDE_{env}</code> environment variable.</li> <li><code>ZOE_CONFIG_OVERRIDE</code> environment variable.</li> <li><code>~/.zoe/config/{env}.yml</code> or <code>.json</code> file</li> <li><code>~/.zoe/config/common.yml</code> or <code>.json</code> file</li> </ol> <p>The 2 first environment variables must contain the configuration (or a subset) in json format.</p> <p>The final zoe configuration will be the result of merging all the above configuration values in the increasing level priority.</p> <p>The special <code>common.yml</code> configuration file is supposed to contain configuration values that are common to all the environments. Registered expressions or secrets providers are a good use case. </p>"},{"location":"configuration/chain/#environment-variables-substitutions","title":"Environment variables substitutions","text":"<p>It is possible to use environment variables inside the zoe yaml or json configuration files and zoe will automatically substitute those variables at runtime from the environment.</p> <p>The following example shows the use of an environment variable inside a yaml configuraiton file:</p> <pre><code>clusters:\n\n  my-cluster:\n    props:\n\n      bootstrap.servers: ${BOOTSTRAP_SERVER}\n      key.deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value.deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer\n    registry: ${SCHEMA_REGISTRY:-localhost:8081}\n\nrunners:\n    default: local\n</code></pre> <p>With the above configuration, zoe replaces the <code>${BOOTSTRAP_SERVER}</code> and <code>${SCHEMA_REGISTRY}</code> expressions with the value of the environment variables <code>BOOTSTRAP_SERVER</code> and <code>SCHEMA_REGISTRY</code> respectively. If the <code>SCHEMA_REGISTRY</code> is not found, the specified default value is used (<code>localhost:8081</code> in this case). If no default value is specified and no environment variable with the corresponding name exists, the expression is simply not replaced.</p> <p>The following command should make the previous statement clearer:</p> CommandOutput <pre><code>BOOTSTRAP_SERVER=localhost:9092 zoe -o table config clusters list\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 cluster    \u2502 brokers        \u2502 registry       \u2502 topics \u2502 groups \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 my-cluster \u2502 localhost:9092 \u2502 localhost:8081 \u2502        \u2502        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"configuration/environments/","title":"Environments","text":"<p>Zoe allows you to separate clusters configuration into multiple environments. This can be achieved by creating a dedicated yaml file for each environment in zoe's configuration directory <code>~/.zoe/config</code>.</p> <p>A typical use case is when dealing with a development, a staging and a production kafka cluster. In this case, we can create 3 configuration files :</p> <pre><code>~/.zoe/config\n\u251c\u2500\u2500 dev.yml\n\u251c\u2500\u2500 staging.yml\n\u2514\u2500\u2500 prod.yml\n</code></pre> <p>We can then refer to a specific environment using <code>--env</code> or <code>-e</code> option :</p> <pre><code>zoe --env staging -c my-kafka topics consume input -n 10\n</code></pre> <p>In this case, Zoe will use the <code>~/.zoe/config/staging.yml</code> configuration file.</p> <p>By default, when <code>--env</code> is not specified, zoe will use a default environment called <code>default</code> and thus uses the <code>~/.zoe/config/default.yml</code>.</p> <p>Choosing an environment can also be done using an environment variable called <code>ZOE_ENV</code> :</p> <pre><code>export ZOE_ENV=pro\nzoe -c my-kafka topics consume input -n 10\n</code></pre>"},{"location":"configuration/init/","title":"Config initialization","text":""},{"location":"configuration/init/#from-scratch","title":"From scratch","text":"<p>The simplest way to initialize zoe configuration from scratch is to use the zoe CLI:</p> Command <pre><code>zoe config init\n</code></pre> <p>This will create a <code>default.yml</code> file in <code>~/.zoe/config</code> by default.</p>"},{"location":"configuration/init/#from-an-existing-local-directory","title":"From an existing local directory","text":"<p>If you already have locally a directory that contains ready to use configuration files you can use:</p> Command <pre><code>zoe config init --from local --path /path/to/config\n</code></pre> <p>This will copy the yaml files from the target directory to <code>~/.zoe/config</code>.</p>"},{"location":"configuration/init/#from-a-git-repository","title":"From a git repository","text":"<p>You can also copy the configuration from an existing git repository. For example, to copy the zoe config used in the guides in the official repository:</p> Command <pre><code>zoe config init --from git --url 'https://github.com/adevinta/zoe.git' --dir docs/guides/simple/config\n</code></pre>"},{"location":"configuration/overview/","title":"Configuring zoe","text":"<p>Zoe relies on a pre-set configuration to infer most of the parameters at usage time when interacting with a cluster using the CLI. This is one of the key points that makes zoe easy to use.</p> <p>Zoe loads its configuration from a variety of sources. It also has a complex override chain that makes it highly configurable even in the context of containers.</p> <p>In this guide, we will discover the following points:</p> <ul> <li>Config initialization: We will start with how to initialize zoe configuration files by either creating them from scratch or loading them from an existing source.  </li> <li>Environments: We will see how zoe allows you to separate clusters' configuration into multiple environments and how we can select the appropriate environment when using zoe.</li> <li>Configuration loading chain: We will then tackle zoe's complex configuration loading chain and how configuration values can be overridden with environment variables.</li> <li>Configuration reference: This section contains the list of all possible values in zoe's configuration file.</li> </ul>"},{"location":"configuration/reference/","title":"Configuration reference","text":"<pre><code># Clusters definition\nclusters:\n\n  # Cluster alias (used with the --cluster option to refer to this cluster config)\n  subito:\n\n    # Kafka clients properties that will be injected to all Kafka clients by Zoe at runtime\n    # For more information on available properties : \n    #   - consumer : https://kafka.apache.org/documentation/#consumerconfigs\n    #   - producer : https://kafka.apache.org/documentation/#producerconfigs\n    # This section can contain secrets.\n    props:\n      bootstrap.servers: my-kafka.example.com:9092\n      key.deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value.deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer\n      sasl.jaas.config: secret:JAAS_CONFIG\n      security.protocol: SASL_SSL\n      sasl.mechanism: SCRAM-SHA-256\n\n    # Schema registry address of the cluster. Will be used by zoe when interacting with the schema registry (schemas list, describe and deploy command)\n    # When this property is set, zoe automatically injects the property 'schema.registry.url' into the Kafka clients props.\n    registry: https://my-registry.example.com\n\n    # A list of consumer groups keyed by their alias. Useful when using the 'zoe groups' command to interact with consumer groups.\n    # When you need to refer to a consumer group, you can use the alias instead of the full name of the consumer group.\n    groups:\n      my-group: long-consumer-group-name\n\n    # Topics config section. Basically a dictionary with the topic's alias as the key and the topic's configuration as the value.\n    # The topic's configuration basically includes :\n    #   - name: the full name of the topic\n    #   - subject (optional) : the subject name of the avro schema of the topic.\n    topics:\n\n      topic-alias:\n        name: full-name-of-the-topic-in-the-cluster\n        subject: subject-name-of-the-topic\n        # Override any kafka client property that is specific to a topic\n        propsOverride:\n          key.deserializer: org.apache.kafka.common.serialization.StringDeserializer\n          value.deserializer: org.apache.kafka.common.serialization.StringDeserializer\n\n# Runners configuration\nrunners:\n\n  # Default runner to use when the '-r' option is not specified\n  default: lambda\n\n  # Runners configuration\n  config:\n\n    # The kubernetes runner configuration\n    kubernetes:\n      # Kubernetes context to use\n      context: mu-kube-context\n      # Namespace to use\n      namespace: env-staging\n      # Whether to delete the pods after completion\n      deletePodAfterCompletion: true\n      # Number of CPUs\n      cpu: \"1\"\n      # Memory limit\n      memory: \"512M\"\n      # Timeout of the commands\n      timeoutMs: 300000\n      # Annotations to attach to the pods \n      annotations:\n        key1: value1\n        key2: value2\n\n    # The lambda runner configuration\n    lambda:\n\n      # This section sets the deployment context of the lambda function. Mainly used with the 'zoe lambda deploy' command.\n      deploy:\n        subnets: [ \"subnet-xxxxxx\" ]\n        securityGroups: [ \"sg-yyyyy\" ]\n        memory: 512\n        timeout: 500\n\n      # Credentials provider for the lambda client. More credentials type can be provided.\n      # Cf. The runners section in The advanced usage guide.\n      credentials:\n        type: \"profile\"\n        name: \"my-profile\"\n\n      # AWS Region for the lambda client\n      awsRegion: eu-west-1\n\n# Registered expressions section\n# Cf. The registered expression guide in the Advanced usage section.\nexpressions:\n  short_id: \"ends_with(id, '{{ value }}')\"\n\n# Secrets provider\n# Cf. The secrets provider guide in the Advanced usage section. \nsecrets:\n  provider: \"exec\"\n  command: [ \"my-command\", \"{secretName}\", \"{context}\" ]\n</code></pre>"},{"location":"contributing/","title":"Contributor's guide","text":"<p>TODO</p>"},{"location":"contributing/#build-from-source","title":"Build from source","text":""},{"location":"contributing/#requirements","title":"Requirements","text":"<p>To build and deploy : - java 11 or later (install with the awesome sdkman) </p>"},{"location":"contributing/#build-zoe-cli","title":"Build zoe cli","text":"<pre><code># switch to java 11 or later\n# if you are using sdkman\nsdk use java 11\n\n# build zoe CLI\n./gradlew clean zoe-cli:installDist\n\n# launch zoe cli\nzoe-cli/build/install/zoe/bin/zoe --help\n\n# if you don't have any config yet\nzoe-cli/build/install/zoe/bin/zoe config init\n</code></pre>"},{"location":"contributing/#development","title":"Development","text":""},{"location":"contributing/#local-testing","title":"Local testing","text":"<pre><code># spin up the local environment\ndocker-compose -f docs/guides/simple/docker-compose.yml up -d\n\n# point zoe to the testing environment\nexport ZOE_CONFIG_DIR=docs/guides/simple/config\n\n# use the locally built zoe CLI\nzoe-cli/build/install/zoe/bin/zoe topics list\n\n# produce some data\nzoe-cli/build/install/zoe/bin/zoe topics produce --topic simple --from-file docs/guides/simple/data.json\n</code></pre>"},{"location":"contributing/#testing-actions","title":"Testing actions","text":"<pre><code>docker build -t gh-actions:ubuntu-latest dev/actions/images/ubuntu\nact -P ubuntu-latest=gh-actions:ubuntu-latest -r -j release-runtimeless -e dev/actions/payloads/release.json release\n</code></pre>"},{"location":"guides/overview/","title":"Guides","text":"<p>The zoe repository provides a bunch of Hands-on guides that walks you through the most useful concepts of zoe. These guides are self contained and do not require extra infrastructure other than you own machine.</p> <ul> <li>A basic scenario: This tutorial walks you through the most basic functionalities of zoe. It makes use of a dataset downloaded from the Cat Facts API to explore reading and writing data from / into kafka using zoe.</li> <li>Zoe with Avro: This tutorial shows zoe support for avro and the schema registry. If you are new to zoe, start with the simple example above.</li> <li>Zoe with Kubernetes: This tutorial shows you how you can offload consumption and interactions to kubernetes pods for parallelism.</li> <li>Managing configuration: This guide shows you some best practices on how to manage the configuration with zoe.</li> </ul>"},{"location":"guides/avro/guide/","title":"Zoe with Avro","text":"<p>This tutorial shows zoe support for avro and the schema registry. If you are new to zoe, start with the basic scenario.</p>"},{"location":"guides/avro/guide/#what-you-will-learn","title":"What you will learn","text":"<p>In this tutorial, you will learn the following aspects of zoe:</p> <ul> <li>Configure zoe to use against avro topics.</li> <li>Listing avro schemas registered in the schema registry</li> <li>Deploying <code>.avdl</code> avro schemas</li> <li>Writing json data into kafka topics using avro</li> <li>Reading avro data from a topic</li> </ul>"},{"location":"guides/avro/guide/#prerequisites","title":"Prerequisites","text":"<p>For this guide you will need:</p> <ul> <li>Zoe (install instructions are here)</li> <li>Docker and docker-compose (that we will use to spin up Kafka)</li> </ul>"},{"location":"guides/avro/guide/#prepare-the-environment","title":"Prepare the environment","text":"<ul> <li>Clone the repository: <code>git clone https://github.com/adevinta/zoe.git</code></li> <li>Go to the directory: <code>docs/guides/avro</code></li> <li>Spin up the kafka cluster: <code>docker-compose up -d</code>.</li> <li>Check all the containers are up:</li> </ul> CommandOutput <pre><code>docker-compose ps      \n</code></pre> <pre><code>  Name               Command            State                        Ports                      \n------------------------------------------------------------------------------------------------\nbroker      /etc/confluent/docker/run   Up      0.0.0.0:29092-&gt;29092/tcp, 0.0.0.0:9092-&gt;9092/tcp\nzookeeper   /etc/confluent/docker/run   Up      0.0.0.0:2181-&gt;2181/tcp, 2888/tcp, 3888/tcp      \n</code></pre>"},{"location":"guides/avro/guide/#configure-zoe","title":"Configure zoe","text":"<p>Now, we need to configure zoe to make it aware of the cluster.</p> <p>Create a new file called <code>default.yml</code> inside zoe's config directory (<code>~/.zoe/config</code> by default) and fill it with the following content:</p> ~/.zoe/config/default.yml <pre><code>clusters:\n  default:\n    props:\n      bootstrap.servers: \"localhost:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"io.confluent.kafka.serializers.KafkaAvroDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"io.confluent.kafka.serializers.KafkaAvroSerializer\"\n\n    registry: \"http://localhost:8081\"\n\n    topics:\n      input:\n        name: \"input-events-topic\"\n        subject: \"input-events-topic-value\"\n\nrunners:\n  default: \"local\"\n</code></pre> <p>The basic scenario guide explains most of the configuration above. The relevant parts for this guide are the following:</p> <ul> <li>In the <code>default</code> cluster's configuration, notice the <code>registry</code> key. This defines the address of the schema registry where avro schemas are stored. When we define this key, zoe automatically adds the <code>schema.registry.url</code> property to the consumers and producers and there is no need to supply it manually.</li> <li>Notice also that we are using the <code>KafkaAvroDeserializer</code> and <code>KafkaAvroSerializer</code> in the cluster's client properties.</li> <li>In the topics section, besides the name of the topic, we define the subject name of the schema associated with the topic. This is an optional parameter that is only used when producing data into the topic so that zoe serializes the data using the right Avro schema. You can also override it with the <code>--subject</code> option in the <code>topics produce</code> command. </li> </ul> <p>If you don't want to write this configuration by hand, you can copy the one already present in the repository by using the following command:</p> Command <pre><code>zoe config init --from git --url https://github.com/adevinta/zoe --dir docs/guides/avro/config\n</code></pre> <p>Ensure zoe is now aware of the cluster by executing the following command:</p> CommandOutput <pre><code>zoe --silent -o table config clusters list\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 cluster \u2502 brokers         \u2502 registry              \u2502 topics                                     \u2502 groups \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 default \u2502 localhost:29092 \u2502 http://localhost:8081 \u2502 alias: \"input\"  name: \"input-events-topic\" \u2502        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Now, you're ready to use zoe to interact with the local kafka cluster. This cluster is available in the provided config above under the <code>local</code> alias (take a look at <code>zoe-config/default.yml</code>)</p>"},{"location":"guides/avro/guide/#creating-the-cat-facts-avro-schema-with-zoe","title":"Creating the Cat Facts Avro schema with zoe","text":"<p>In this guide we will be using again the cat facts data that we used in the basic scenario guide. This time though we will serialize this data in Avro. So the first step is to create the Avro schema representing this data!</p> <p>The Avro schema representing the Cat Facts dataset is provided in the repository. It is written in <code>.avdl</code> which is a format that describes avro schemas in an expressive and intuitive way. You can know more about <code>avdl</code> here</p> <p>Usually, to deploy an <code>.avdl</code> file into the schema registry we first need to compile it down into an <code>.avsc</code> file before posting it to the registry. With zoe, this compilation step is done automatically for us. In fact, zoe handles <code>.avdl</code> files as seamlessly as <code>.avsc</code> files.</p> CommandOutput <pre><code># deploy the cat facts schema from the \nzoe schemas deploy \\\n  --avdl \\\n  --from-file schema.avdl \\\n  --name CatFact \\\n  --strategy topic \\\n  --topic input \\\n  --suffix value\n</code></pre> <pre><code>2020-06-28 09:38:29 INFO zoe: loading config from url : file:/tmp/zoe-avro/default.yml\n{\"type\":\"actual\",\"id\":1,\"subject\":\"input-events-topic-value\"}\n</code></pre> <p>Ensure our schema is successfully registered by listing the topics from the schema registry:</p> CommandOutput <pre><code>zoe --silent -o table schemas list\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 subjects                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 input-events-topic-value \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Describe the schema using:</p> CommandOutput <pre><code>zoe --silent -o table schemas describe input-events-topic-value\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 subject                  \u2502 versions \u2502 latest                                                                                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 input-events-topic-value \u2502 1        \u2502 {\"type\":\"record\",\"name\":\"CatFact\",\"namespace\":\"com.adevinta.oss.zoe.guides\",\"fields\":[...]} \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Delete a specific schema version using:</p> CommandOutput <pre><code>zoe schemas delete input-events-topic-value --schema-version 1\n</code></pre> <pre><code>{\"type\":\"actual\",\"response\":[1],\"subject\":\"input-events-topic-value\",\"version\":\"1\",\"hardDelete\":\"soft delete\"}\n</code></pre> <p>Delete a subject permanently (including metadata):</p> CommandOutput <pre><code>zoe schemas delete input-events-topic-value --hard\n</code></pre> <pre><code>{\"type\":\"actual\",\"response\":[2],\"subject\":\"input-events-topic-value\",\"version\":\"version\",\"hardDelete\":\"hard delete\"} \n</code></pre>"},{"location":"guides/avro/guide/#producing-data","title":"Producing data","text":"<p>Now that we have the Cat Facts Avro schema registered, let's produce some cat facts from the <code>data.json</code> file in avro:</p> CommandOutput <pre><code>zoe -o table topics produce --topic input --from-file data.json --subject input-events-topic-value\n</code></pre> <pre><code>2020-06-28 09:48:11 INFO zoe: loading config from url : file:/tmp/zoe-avro/default.yml\n2020-06-28 09:48:11 INFO zoe: producing '211' records to topic 'input-events-topic'\n2020-06-28 09:48:12 INFO AppInfoParser: Kafka version: 5.5.0-ccs\n2020-06-28 09:48:12 INFO AppInfoParser: Kafka commitId: 785a156634af5f7e\n2020-06-28 09:48:12 INFO AppInfoParser: Kafka startTimeMs: 1593330492339\n2020-06-28 09:48:12 INFO Metadata: [Producer clientId=producer-1] Cluster ID: pD8UlIdIQkyn40_NW_-f4w\n2020-06-28 09:48:12 INFO KafkaProducer: [Producer clientId=producer-1] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 produced                                                                        \u2502 skipped \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 offset: 43  partition: 0  topic: \"input-events-topic\"  timestamp: 1593330492564 \u2502         \u2502\n\u2502 offset: 31  partition: 2  topic: \"input-events-topic\"  timestamp: 1593330492591 \u2502         \u2502\n\u2502 offset: 47  partition: 1  topic: \"input-events-topic\"  timestamp: 1593330492591 \u2502         \u2502\n\u2502 offset: 48  partition: 1  topic: \"input-events-topic\"  timestamp: 1593330492591 \u2502         \u2502\n\u2502 offset: 50  partition: 4  topic: \"input-events-topic\"  timestamp: 1593330492591 \u2502         \u2502\n\u2502 offset: 86  partition: 3  topic: \"input-events-topic\"  timestamp: 1593330492619 \u2502         \u2502\n| ...                                                                             |         |\n\u2502 offset: 89  partition: 1  topic: \"input-events-topic\"  timestamp: 1593330492619 \u2502         \u2502\n\u2502 offset: 96  partition: 0  topic: \"input-events-topic\"  timestamp: 1593330492619 \u2502         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>We could have omitted the <code>--subject</code> option as we have already told zoe about that topic's subject name in the configuration (see above).</p>"},{"location":"guides/avro/guide/#reading-data","title":"Reading data","text":"<p>Reading data from an Avro topic with zoe is really no different from reading a Json topic. Zoe seemlessly transforms avro data into json and zoe can apply the jmespath filters with <code>--filter</code> as with json data. In fact the following command works exactly the same in both this guide and the Basic scenario one:</p> CommandOutput <pre><code># filter out Kasimir's data\nzoe --silent -o table topics consume input \\\n       -n 10 \\\n       --from 'PT1h' \\\n       --query '{id: _id, type: type, user: user, upvotes: upvotes}' \\\n       --filter \"user.name.first == 'Kasimir'\"\n</code></pre> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 id                       \u2502 type \u2502 user                                      \u2502 upvotes \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e008d00aac31001185ed0f \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502\n\u2502                          \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00b3a0aac31001185ed20 \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502\n\u2502                          \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00a090aac31001185ed16 \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 4       \u2502\n\u2502                          \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e008d00aac31001185ed0f \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502\n\u2502                          \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00bdb0aac31001185edfd \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502\n\u2502                          \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/configuration/guide/","title":"Managing configuration","text":"<p>Zoe has a powerful configuration engine that can be overridden and customized in a number of ways. Zoe also makes it easy to share configuration among the team using a github repository.</p> <p>In this guide, we will discover the different ways to configure zoe.</p>"},{"location":"guides/configuration/guide/#initializing-the-configuration","title":"Initializing the configuration","text":"<p>Zoe stores its configuration in <code>~/.zoe/config</code> by default. The directory location can be overridden with the environment variable <code>ZOE_CONFIG_DIR</code> or by using the option <code>zoe --config-dir /path/to/config</code>.</p> <p>Add a file named <code>default.yml</code> inside <code>~/.zoe/config</code> like the following:</p> ~/.zoe/config/default.yml <pre><code>clusters:\n\n  cluster1:\n    props:\n      bootstrap.servers: \"cluster1:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\n  cluster2:\n    props:\n      bootstrap.servers: \"cluster2:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\nrunners:\n  default: \"local\"\n</code></pre> <p>The configuration above defines two Kafka clusters aliased <code>cluster1</code> and <code>cluster2</code>. To refer to a specific cluster when using zoe, you can use the <code>--cluster</code> option or the short version <code>-c</code>:</p> Command <pre><code># To target cluster1\nzoe -c cluster1 topics list\n\n# To target cluster2\nzoe -c cluster2 topics list\n</code></pre>"},{"location":"guides/configuration/guide/#managing-multiple-environments","title":"Managing multiple environments","text":"<p>If you are dealing with multiple environments, you can create multiple yaml configuration files in <code>~/.zoe/config</code> as the following:</p> ~/.zoe/config~/.zoe/config/default.yml~/.zoe/config/prod.yml <pre><code>~/.zoe/config\n\u251c\u2500\u2500 default.yml\n\u2514\u2500\u2500 prod.yml\n</code></pre> <pre><code>clusters:\n\n  cluster1:\n    props:\n      bootstrap.servers: \"cluster1:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\n  cluster2:\n    props:\n      bootstrap.servers: \"cluster2:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\nrunners:\n  default: \"local\"\n</code></pre> <pre><code>clusters:\n\n  cluster1:\n    props:\n      bootstrap.servers: \"cluster1-prod.example.com:9092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\n  cluster2:\n    props:\n      bootstrap.servers: \"cluster2-prod.example.com:9092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\nrunners:\n  default: \"kubernetes\"\n</code></pre> <p>The example above defines two environments: <code>default</code> and <code>prod</code>. Environments can be specified using the <code>--environment</code> or <code>-e</code> option and giving it the environment name which is the file name without the extension:</p> Command <pre><code># To target cluster1 in the prod environment\nzoe -e prod -c cluster1 topics list\n\n# To target cluster2 in the default environment\nzoe -e default -c cluster2 topics list\n</code></pre> <p>When no environment is specified with <code>-e</code>, the environment named <code>default</code> is used. Thus, the last command could have been written as the following:</p> Command <pre><code># To target cluster2 in the default environment\nzoe -c cluster2 topics list\n</code></pre>"},{"location":"guides/configuration/guide/#the-special-commonyml-file","title":"The special common.yml file","text":"<p>You can store configuration values that are shared across all the environments in a file called <code>common.yml</code> inside zoe's configuration directory. The configuration in this file will always be loaded no matter what environment has been specified.</p> ~/.zoe/config/common.yml <pre><code>secrets:\n  provider: \"exec\"\n  command: [ \"my-command\", \"{secretName}\", \"{context}\" ]\n\nrunners:\n  default: lambda \n</code></pre> <p>The example above sets the secrets' provider configuration and the default runner in the shared <code>common.yml</code> file. This way, these parameters are loaded for all the environments. </p> <p>The environment specific configuration values takes precedence over the <code>common.yml</code> configuration values. To know more about zoe's configuration loading chain, checkout the dedicated section in the documentation.</p>"},{"location":"guides/configuration/guide/#sharing-configuration-in-git","title":"Sharing configuration in git","text":"<p>The above configuration tree can be shared across the whole team in a git repository. This allows the configuration to be written once, and used by all the team members.</p> <p>If your configuration contains credentials (ex. <code>sasl.jaas.config</code> property), you can use a secret provider to describe the secret in the configuration without exposing its value.</p> <p>Zoe can easily fetch a remote configuration directory from git using the following command:</p> Command <pre><code>zoe config init --from git --url https://github.com/adevinta/zoe --dir docs/guides/simple/config\n</code></pre>"},{"location":"guides/configuration/guide/#overriding-configuration-values-using-environment-variables","title":"Overriding configuration values using environment variables","text":"<p>You can override part of zoe's configuration using an environment variable called <code>ZOE_CONFIG_OVERRIDE</code>. This variable takes a json that will be shallow merged into the final configuration.</p> <p>The example below overrides the <code>bootstrap.servers</code> property of <code>cluster1</code>:</p> <pre><code>export ZOE_CONFIG_OVERRIDE={\"clusters\": {\"cluster1\": {\"props\": {\"bootstrap.servers\": \"custom.endpoint:9092\"}}}}\nzoe -c cluster1 topics list\n</code></pre> <p>Zoe provides other environment variables to override environment specific configuration values.  To know more, checkout the dedicated section about zoe's configuration loading chain.</p>"},{"location":"guides/kubernetes/guide/","title":"Zoe with kubernetes","text":"<p>In this tutorial, we will learn how to use Zoe with the Kubernetes runner.</p> <p>We will start by spinning up a simple one node Kafka cluster in Kubernetes, and then we will use zoe to interact with it using the <code>kubernetes</code> runner. With this runner, zoe spins up consumers / producers as pods, and the results will be forwarded to the caller's machine. This is useful in many scenarios. Here are some examples:</p> <ul> <li>When the Kafka cluster is not reachable from our local machine and is only reachable from within the Kubernetes cluster.</li> <li>If we want to parallelize topics consumption over multiple pods (see an example in this guide).</li> </ul>"},{"location":"guides/kubernetes/guide/#prerequisites","title":"Prerequisites","text":"<ul> <li><code>zoe</code> (Install instructions here)</li> <li><code>kubectl</code> and a working kubernetes cluster (cf. below for more instructions on how to install a kubernetes cluster)</li> <li>This section assumes you have already gone through the Basic scenario guide and will not explain the basics that were already covered there.</li> </ul>"},{"location":"guides/kubernetes/guide/#prepare-the-environment","title":"Prepare the environment","text":""},{"location":"guides/kubernetes/guide/#kubernetes-setup","title":"Kubernetes setup","text":"<p>In this tutorial, you will need kubectl and a working kubernetes cluster that you can use to test Zoe. Several solutions exist to install a kubernetes cluster locally. The most common ones are: Minikube, Kind, MicroK8s and k3s.</p> <p>No matter how you installed your local cluster (or if you are using a remote one), make sure your current context in your kube config file is pointing to that cluster (you can explicitly configure zoe to use a specific context and a specific namespace but for the sake of simplicity we will leave this part out of this tutorial).</p> <p>You can ensure that the kubernetes cluster is reachable and is pointing to the right context by using:</p> CommandOutput <pre><code>kubectl cluster-info\n</code></pre> <pre><code>Kubernetes master is running at https://127.0.0.1:16443\nCoreDNS is running at https://127.0.0.1:16443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n</code></pre> <p>The output may be different on your machine.</p>"},{"location":"guides/kubernetes/guide/#setup-kafka","title":"Setup Kafka","text":"<p>Ready to use manifest files to install a single node Kafka cluster on kubernetes are provided in the repository. Let's use them:</p> <ul> <li>Clone the repository: <code>git clone https://github.com/adevinta/zoe.git</code></li> <li>Go to the kubernetes guide directory: <code>cd zoe/docs/guides/kubernetes</code></li> <li>Apply the manifests: <code>kubectl apply --prune --selector='context=zoe-demo' -f resources</code></li> </ul> <p>This will install a Zookeeper and a Kafka node. You can check the readiness of the pods using:</p> CommandOutput <pre><code>kubectl get all -l context=zoe-demo\n</code></pre> <pre><code>NAME                TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)              AGE\nservice/broker      ClusterIP   10.152.183.151   &lt;none&gt;        9092/TCP,29092/TCP   44m\nservice/zookeeper   ClusterIP   10.152.183.157   &lt;none&gt;        2181/TCP             44m\n\nNAME                        READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/broker      1/1     1            1           44m\ndeployment.apps/zookeeper   1/1     1            1           44m\n</code></pre>"},{"location":"guides/kubernetes/guide/#configure-zoe","title":"Configure zoe","text":"<p>Create a new file named <code>k8s.yml</code> in zoe's configuration directory (<code>~/.zoe/config</code> by default) and fill it with the following content:</p> ~/.zoe/config/k8s.yml <pre><code>clusters:\n  default:\n    props:\n      bootstrap.servers: \"broker:9092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\nrunners:\n  default: \"kubernetes\"\n</code></pre> <p>The configuration above defines the <code>kubernetes</code> runner as the default one. When using this runner with no additional configuration, <code>zoe</code> targets the kubernetes cluster pointed at by the current context (cf. <code>kubectl cluster-info</code> to know which cluster you are targeting). It is possible to point to a specific context. To know more, visit the kubernetes runner dedicated section. </p> <p>Notice the <code>bootstrap.servers</code> property above pointing to <code>broker:9092</code>. We are using the actual broker Service name defined in kubernetes. This DNS name is only visible inside the kubernetes cluster. This is possible because as explained above, the kubernetes runner spins up the consumers, producers and all the kafka clients as pods inside the cluster. So the internal kubernetes DNS names are visible and usable.</p> <p>If you don't want to write this configuration by hand, you can copy it directly from the repository by using:</p> Command <pre><code>zoe config init --from git --url https://github.com/adevinta/zoe --dir docs/guides/kubernetes/config\n</code></pre> <p>Ensure zoe is aware about our new configuration:</p> CommandOutput <pre><code>zoe -e k8s -o table config clusters list\n</code></pre> <pre><code>2020-06-27 20:14:05 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 cluster \u2502 brokers     \u2502 registry \u2502 topics \u2502 groups \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 default \u2502 broker:9092 \u2502 null     \u2502        \u2502        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Notice our use of <code>-e k8s</code> in the above command. Zoe supports having multiple configuration files inside its config directory representing different environments. To point to a specific environment, we use the <code>-e &lt;env name&gt;</code> (<code>&lt;env name&gt;</code> is the name of the configuration file without the extension). When no environment is specified, zoe uses the environment called <code>default</code>. </p> <p>Zoe is now ready to be used against our cluster!</p>"},{"location":"guides/kubernetes/guide/#creating-the-topic","title":"Creating the topic","text":"<p>Create a topic called <code>cat-facts-topic</code> (This first run will download the <code>zoe</code> docker image so expect it to be slower):</p> CommandOutput <pre><code>zoe -e k8s topics create cat-facts-topic --partitions 10\n</code></pre> <pre><code>2020-06-27 20:54:13 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n2020-06-27 20:54:14 INFO zoe: creating topic: cat-facts-topic\n{\"done\":true}\n</code></pre> <p>Ensure our topic is created:</p> CommandOutput <pre><code>zoe -e k8s -o table topics list\n</code></pre> <pre><code>2020-06-27 20:56:47 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n2020-06-27 20:56:48 INFO zoe: requesting topics...\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 value             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \"cat-facts-topic\" \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>You can higher up the logging verbosity to see how zoe launches pods and watches for changes:</p> CommandOutput <pre><code>zoe -vv -e k8s -o table topics list\n</code></pre> <pre><code>2020-06-27 21:21:39 DEBUG zoe: trying to fetch config url for env 'common' with : EnvVarsConfigUrlProvider\n2020-06-27 21:21:39 DEBUG zoe: trying to fetch config url for env 'common' with : LocalConfigDirUrlProvider\n2020-06-27 21:21:39 DEBUG zoe: trying to fetch config url for env 'k8s' with : EnvVarsConfigUrlProvider\n2020-06-27 21:21:39 DEBUG zoe: trying to fetch config url for env 'k8s' with : LocalConfigDirUrlProvider\n2020-06-27 21:21:39 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n2020-06-27 21:21:39 DEBUG Config: Trying to configure client from Kubernetes config...\n2020-06-27 21:21:39 DEBUG Config: Found for Kubernetes config at: [/home/wlezzar/.kube/config].\n2020-06-27 21:21:40 INFO zoe: requesting topics...\n2020-06-27 21:21:40 DEBUG WatchConnectionManager: Connecting websocket ... io.fabric8.kubernetes.client.dsl.internal.WatchConnectionManager@66b71771\n2020-06-27 21:21:40 DEBUG WatchConnectionManager: WebSocket successfully opened\n2020-06-27 21:21:40 DEBUG zoe: received event 'ADDED' with pod : {\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"creationTimestamp\":\"2020-06-27T19:21:40Z\",\"labels\":{\"owner\":\"zoe\",\"runnerId\":\"53ec2205-897e-4cc0-b1eb-07ea091f14c0\"},\"name\":\"zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"namespace\":\"default\",\"resourceVersion\":\"1513249\",\"selfLink\":\"/api/v1/namespaces/default/pods/zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"uid\":\"a8dea11a-a15d-4855-bc7f-ecb7ec7c78d6\"},\"spec\":{\"containers\":[{\"args\":[\"{\\\"function\\\":\\\"topics\\\",\\\"payload\\\":{\\\"props\\\":{\\\"bootstrap.servers\\\":\\\"broker:9092\\\",\\\"key.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"value.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"key.serializer\\\":\\\"org.apache.kafka.common.serialization.StringSerializer\\\",\\\"value.serializer\\\":\\\"org.apache.kafka.common.serialization.ByteArraySerializer\\\"}}}\",\"/output/response.txt\"],\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imagePullPolicy\":\"Always\",\"name\":\"zoe\",\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"512M\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"512M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]},{\"args\":[\"sh\",\"-c\",\"while [ -f /output/response.txt ]; do sleep 2; done\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"tailer\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"24M\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"24M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"dnsPolicy\":\"ClusterFirst\",\"enableServiceLinks\":true,\"initContainers\":[{\"command\":[\"touch\",\"/output/response.txt\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"create-output-file\",\"resources\":{},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"nodeName\":\"wlezzar-thinkpad-t460p\",\"priority\":0,\"restartPolicy\":\"Never\",\"schedulerName\":\"default-scheduler\",\"securityContext\":{},\"serviceAccount\":\"default\",\"serviceAccountName\":\"default\",\"terminationGracePeriodSeconds\":30,\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"tolerationSeconds\":300},{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"tolerationSeconds\":300}],\"volumes\":[{\"emptyDir\":{},\"name\":\"output-volume\"},{\"name\":\"default-token-v9k66\",\"secret\":{\"defaultMode\":420,\"secretName\":\"default-token-v9k66\"}}]},\"status\":{\"conditions\":[{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"message\":\"containers with incomplete status: [create-output-file]\",\"reason\":\"ContainersNotInitialized\",\"status\":\"False\",\"type\":\"Initialized\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"message\":\"containers with unready status: [zoe tailer]\",\"reason\":\"ContainersNotReady\",\"status\":\"False\",\"type\":\"Ready\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"message\":\"containers with unready status: [zoe tailer]\",\"reason\":\"ContainersNotReady\",\"status\":\"False\",\"type\":\"ContainersReady\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"status\":\"True\",\"type\":\"PodScheduled\"}],\"containerStatuses\":[{\"image\":\"alpine:3.9.5\",\"imageID\":\"\",\"lastState\":{},\"name\":\"tailer\",\"ready\":false,\"restartCount\":0,\"started\":false,\"state\":{\"waiting\":{\"reason\":\"PodInitializing\"}}},{\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imageID\":\"\",\"lastState\":{},\"name\":\"zoe\",\"ready\":false,\"restartCount\":0,\"started\":false,\"state\":{\"waiting\":{\"reason\":\"PodInitializing\"}}}],\"hostIP\":\"192.168.1.16\",\"initContainerStatuses\":[{\"image\":\"alpine:3.9.5\",\"imageID\":\"\",\"lastState\":{},\"name\":\"create-output-file\",\"ready\":false,\"restartCount\":0,\"state\":{\"waiting\":{\"reason\":\"PodInitializing\"}}}],\"phase\":\"Pending\",\"qosClass\":\"Burstable\",\"startTime\":\"2020-06-27T19:21:40Z\"}}\n2020-06-27 21:21:40 DEBUG zoe: pod is spinning up...\n2020-06-27 21:21:42 DEBUG zoe: received event 'MODIFIED' with pod : {\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"creationTimestamp\":\"2020-06-27T19:21:40Z\",\"labels\":{\"owner\":\"zoe\",\"runnerId\":\"53ec2205-897e-4cc0-b1eb-07ea091f14c0\"},\"name\":\"zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"namespace\":\"default\",\"resourceVersion\":\"1513256\",\"selfLink\":\"/api/v1/namespaces/default/pods/zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"uid\":\"a8dea11a-a15d-4855-bc7f-ecb7ec7c78d6\"},\"spec\":{\"containers\":[{\"args\":[\"{\\\"function\\\":\\\"topics\\\",\\\"payload\\\":{\\\"props\\\":{\\\"bootstrap.servers\\\":\\\"broker:9092\\\",\\\"key.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"value.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"key.serializer\\\":\\\"org.apache.kafka.common.serialization.StringSerializer\\\",\\\"value.serializer\\\":\\\"org.apache.kafka.common.serialization.ByteArraySerializer\\\"}}}\",\"/output/response.txt\"],\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imagePullPolicy\":\"Always\",\"name\":\"zoe\",\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"512M\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"512M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]},{\"args\":[\"sh\",\"-c\",\"while [ -f /output/response.txt ]; do sleep 2; done\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"tailer\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"24M\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"24M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"dnsPolicy\":\"ClusterFirst\",\"enableServiceLinks\":true,\"initContainers\":[{\"command\":[\"touch\",\"/output/response.txt\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"create-output-file\",\"resources\":{},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"nodeName\":\"wlezzar-thinkpad-t460p\",\"priority\":0,\"restartPolicy\":\"Never\",\"schedulerName\":\"default-scheduler\",\"securityContext\":{},\"serviceAccount\":\"default\",\"serviceAccountName\":\"default\",\"terminationGracePeriodSeconds\":30,\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"tolerationSeconds\":300},{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"tolerationSeconds\":300}],\"volumes\":[{\"emptyDir\":{},\"name\":\"output-volume\"},{\"name\":\"default-token-v9k66\",\"secret\":{\"defaultMode\":420,\"secretName\":\"default-token-v9k66\"}}]},\"status\":{\"conditions\":[{\"lastTransitionTime\":\"2020-06-27T19:21:42Z\",\"status\":\"True\",\"type\":\"Initialized\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"message\":\"containers with unready status: [zoe tailer]\",\"reason\":\"ContainersNotReady\",\"status\":\"False\",\"type\":\"Ready\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"message\":\"containers with unready status: [zoe tailer]\",\"reason\":\"ContainersNotReady\",\"status\":\"False\",\"type\":\"ContainersReady\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"status\":\"True\",\"type\":\"PodScheduled\"}],\"containerStatuses\":[{\"image\":\"alpine:3.9.5\",\"imageID\":\"\",\"lastState\":{},\"name\":\"tailer\",\"ready\":false,\"restartCount\":0,\"started\":false,\"state\":{\"waiting\":{\"reason\":\"PodInitializing\"}}},{\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imageID\":\"\",\"lastState\":{},\"name\":\"zoe\",\"ready\":false,\"restartCount\":0,\"started\":false,\"state\":{\"waiting\":{\"reason\":\"PodInitializing\"}}}],\"hostIP\":\"192.168.1.16\",\"initContainerStatuses\":[{\"containerID\":\"containerd://d02eff3e9547c1bbda6b90ae18b3baa3cd262886912b56be0bf68f6bed0ed41d\",\"image\":\"docker.io/library/alpine:3.9.5\",\"imageID\":\"docker.io/library/alpine@sha256:115731bab0862031b44766733890091c17924f9b7781b79997f5f163be262178\",\"lastState\":{},\"name\":\"create-output-file\",\"ready\":true,\"restartCount\":0,\"state\":{\"terminated\":{\"containerID\":\"containerd://d02eff3e9547c1bbda6b90ae18b3baa3cd262886912b56be0bf68f6bed0ed41d\",\"exitCode\":0,\"finishedAt\":\"2020-06-27T19:21:41Z\",\"reason\":\"Completed\",\"startedAt\":\"2020-06-27T19:21:41Z\"}}}],\"phase\":\"Pending\",\"podIP\":\"10.42.0.202\",\"podIPs\":[{\"ip\":\"10.42.0.202\"}],\"qosClass\":\"Burstable\",\"startTime\":\"2020-06-27T19:21:40Z\"}}\n2020-06-27 21:21:42 DEBUG zoe: pod is spinning up...\n2020-06-27 21:21:44 DEBUG zoe: received event 'MODIFIED' with pod : {\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"creationTimestamp\":\"2020-06-27T19:21:40Z\",\"labels\":{\"owner\":\"zoe\",\"runnerId\":\"53ec2205-897e-4cc0-b1eb-07ea091f14c0\"},\"name\":\"zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"namespace\":\"default\",\"resourceVersion\":\"1513264\",\"selfLink\":\"/api/v1/namespaces/default/pods/zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"uid\":\"a8dea11a-a15d-4855-bc7f-ecb7ec7c78d6\"},\"spec\":{\"containers\":[{\"args\":[\"{\\\"function\\\":\\\"topics\\\",\\\"payload\\\":{\\\"props\\\":{\\\"bootstrap.servers\\\":\\\"broker:9092\\\",\\\"key.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"value.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"key.serializer\\\":\\\"org.apache.kafka.common.serialization.StringSerializer\\\",\\\"value.serializer\\\":\\\"org.apache.kafka.common.serialization.ByteArraySerializer\\\"}}}\",\"/output/response.txt\"],\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imagePullPolicy\":\"Always\",\"name\":\"zoe\",\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"512M\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"512M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]},{\"args\":[\"sh\",\"-c\",\"while [ -f /output/response.txt ]; do sleep 2; done\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"tailer\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"24M\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"24M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"dnsPolicy\":\"ClusterFirst\",\"enableServiceLinks\":true,\"initContainers\":[{\"command\":[\"touch\",\"/output/response.txt\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"create-output-file\",\"resources\":{},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"nodeName\":\"wlezzar-thinkpad-t460p\",\"priority\":0,\"restartPolicy\":\"Never\",\"schedulerName\":\"default-scheduler\",\"securityContext\":{},\"serviceAccount\":\"default\",\"serviceAccountName\":\"default\",\"terminationGracePeriodSeconds\":30,\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"tolerationSeconds\":300},{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"tolerationSeconds\":300}],\"volumes\":[{\"emptyDir\":{},\"name\":\"output-volume\"},{\"name\":\"default-token-v9k66\",\"secret\":{\"defaultMode\":420,\"secretName\":\"default-token-v9k66\"}}]},\"status\":{\"conditions\":[{\"lastTransitionTime\":\"2020-06-27T19:21:42Z\",\"status\":\"True\",\"type\":\"Initialized\"},{\"lastTransitionTime\":\"2020-06-27T19:21:44Z\",\"status\":\"True\",\"type\":\"Ready\"},{\"lastTransitionTime\":\"2020-06-27T19:21:44Z\",\"status\":\"True\",\"type\":\"ContainersReady\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"status\":\"True\",\"type\":\"PodScheduled\"}],\"containerStatuses\":[{\"containerID\":\"containerd://290cbb74626b8ad76d67d2ef4cfc7a0217a51a33b81eb333d95943bee8f9ffdb\",\"image\":\"docker.io/library/alpine:3.9.5\",\"imageID\":\"docker.io/library/alpine@sha256:115731bab0862031b44766733890091c17924f9b7781b79997f5f163be262178\",\"lastState\":{},\"name\":\"tailer\",\"ready\":true,\"restartCount\":0,\"started\":true,\"state\":{\"running\":{\"startedAt\":\"2020-06-27T19:21:44Z\"}}},{\"containerID\":\"containerd://9e31ab970f1b46beec9a4af8d162f0a6bbaba56cbf3c32c121eae5efaea6d441\",\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imageID\":\"docker.io/adevinta/zoe-core@sha256:d70f67c34bbe9c32aa9aea55ac5801ab38652a1546ea26186a3c246616443a7a\",\"lastState\":{},\"name\":\"zoe\",\"ready\":true,\"restartCount\":0,\"started\":true,\"state\":{\"running\":{\"startedAt\":\"2020-06-27T19:21:43Z\"}}}],\"hostIP\":\"192.168.1.16\",\"initContainerStatuses\":[{\"containerID\":\"containerd://d02eff3e9547c1bbda6b90ae18b3baa3cd262886912b56be0bf68f6bed0ed41d\",\"image\":\"docker.io/library/alpine:3.9.5\",\"imageID\":\"docker.io/library/alpine@sha256:115731bab0862031b44766733890091c17924f9b7781b79997f5f163be262178\",\"lastState\":{},\"name\":\"create-output-file\",\"ready\":true,\"restartCount\":0,\"state\":{\"terminated\":{\"containerID\":\"containerd://d02eff3e9547c1bbda6b90ae18b3baa3cd262886912b56be0bf68f6bed0ed41d\",\"exitCode\":0,\"finishedAt\":\"2020-06-27T19:21:41Z\",\"reason\":\"Completed\",\"startedAt\":\"2020-06-27T19:21:41Z\"}}}],\"phase\":\"Running\",\"podIP\":\"10.42.0.202\",\"podIPs\":[{\"ip\":\"10.42.0.202\"}],\"qosClass\":\"Burstable\",\"startTime\":\"2020-06-27T19:21:40Z\"}}\n2020-06-27 21:21:44 DEBUG zoe: zoe container is in : '{\"running\":{\"startedAt\":\"2020-06-27T19:21:43Z\"}}'\n2020-06-27 21:21:48 DEBUG zoe: received event 'MODIFIED' with pod : {\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"creationTimestamp\":\"2020-06-27T19:21:40Z\",\"labels\":{\"owner\":\"zoe\",\"runnerId\":\"53ec2205-897e-4cc0-b1eb-07ea091f14c0\"},\"name\":\"zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"namespace\":\"default\",\"resourceVersion\":\"1513268\",\"selfLink\":\"/api/v1/namespaces/default/pods/zoe-dd615e81-4fec-4eba-81e2-d0b89a0ea897\",\"uid\":\"a8dea11a-a15d-4855-bc7f-ecb7ec7c78d6\"},\"spec\":{\"containers\":[{\"args\":[\"{\\\"function\\\":\\\"topics\\\",\\\"payload\\\":{\\\"props\\\":{\\\"bootstrap.servers\\\":\\\"broker:9092\\\",\\\"key.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"value.deserializer\\\":\\\"org.apache.kafka.common.serialization.StringDeserializer\\\",\\\"key.serializer\\\":\\\"org.apache.kafka.common.serialization.StringSerializer\\\",\\\"value.serializer\\\":\\\"org.apache.kafka.common.serialization.ByteArraySerializer\\\"}}}\",\"/output/response.txt\"],\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imagePullPolicy\":\"Always\",\"name\":\"zoe\",\"resources\":{\"limits\":{\"cpu\":\"1\",\"memory\":\"512M\"},\"requests\":{\"cpu\":\"1\",\"memory\":\"512M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]},{\"args\":[\"sh\",\"-c\",\"while [ -f /output/response.txt ]; do sleep 2; done\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"tailer\",\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"24M\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"24M\"}},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"dnsPolicy\":\"ClusterFirst\",\"enableServiceLinks\":true,\"initContainers\":[{\"command\":[\"touch\",\"/output/response.txt\"],\"image\":\"alpine:3.9.5\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"create-output-file\",\"resources\":{},\"terminationMessagePath\":\"/dev/termination-log\",\"terminationMessagePolicy\":\"File\",\"volumeMounts\":[{\"mountPath\":\"/output\",\"name\":\"output-volume\"},{\"mountPath\":\"/var/run/secrets/kubernetes.io/serviceaccount\",\"name\":\"default-token-v9k66\",\"readOnly\":true}]}],\"nodeName\":\"wlezzar-thinkpad-t460p\",\"priority\":0,\"restartPolicy\":\"Never\",\"schedulerName\":\"default-scheduler\",\"securityContext\":{},\"serviceAccount\":\"default\",\"serviceAccountName\":\"default\",\"terminationGracePeriodSeconds\":30,\"tolerations\":[{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/not-ready\",\"operator\":\"Exists\",\"tolerationSeconds\":300},{\"effect\":\"NoExecute\",\"key\":\"node.kubernetes.io/unreachable\",\"operator\":\"Exists\",\"tolerationSeconds\":300}],\"volumes\":[{\"emptyDir\":{},\"name\":\"output-volume\"},{\"name\":\"default-token-v9k66\",\"secret\":{\"defaultMode\":420,\"secretName\":\"default-token-v9k66\"}}]},\"status\":{\"conditions\":[{\"lastTransitionTime\":\"2020-06-27T19:21:42Z\",\"status\":\"True\",\"type\":\"Initialized\"},{\"lastTransitionTime\":\"2020-06-27T19:21:48Z\",\"message\":\"containers with unready status: [zoe]\",\"reason\":\"ContainersNotReady\",\"status\":\"False\",\"type\":\"Ready\"},{\"lastTransitionTime\":\"2020-06-27T19:21:48Z\",\"message\":\"containers with unready status: [zoe]\",\"reason\":\"ContainersNotReady\",\"status\":\"False\",\"type\":\"ContainersReady\"},{\"lastTransitionTime\":\"2020-06-27T19:21:40Z\",\"status\":\"True\",\"type\":\"PodScheduled\"}],\"containerStatuses\":[{\"containerID\":\"containerd://290cbb74626b8ad76d67d2ef4cfc7a0217a51a33b81eb333d95943bee8f9ffdb\",\"image\":\"docker.io/library/alpine:3.9.5\",\"imageID\":\"docker.io/library/alpine@sha256:115731bab0862031b44766733890091c17924f9b7781b79997f5f163be262178\",\"lastState\":{},\"name\":\"tailer\",\"ready\":true,\"restartCount\":0,\"started\":true,\"state\":{\"running\":{\"startedAt\":\"2020-06-27T19:21:44Z\"}}},{\"containerID\":\"containerd://9e31ab970f1b46beec9a4af8d162f0a6bbaba56cbf3c32c121eae5efaea6d441\",\"image\":\"docker.io/adevinta/zoe-core:0.26.0\",\"imageID\":\"docker.io/adevinta/zoe-core@sha256:d70f67c34bbe9c32aa9aea55ac5801ab38652a1546ea26186a3c246616443a7a\",\"lastState\":{},\"name\":\"zoe\",\"ready\":false,\"restartCount\":0,\"started\":false,\"state\":{\"terminated\":{\"containerID\":\"containerd://9e31ab970f1b46beec9a4af8d162f0a6bbaba56cbf3c32c121eae5efaea6d441\",\"exitCode\":0,\"finishedAt\":\"2020-06-27T19:21:47Z\",\"reason\":\"Completed\",\"startedAt\":\"2020-06-27T19:21:43Z\"}}}],\"hostIP\":\"192.168.1.16\",\"initContainerStatuses\":[{\"containerID\":\"containerd://d02eff3e9547c1bbda6b90ae18b3baa3cd262886912b56be0bf68f6bed0ed41d\",\"image\":\"docker.io/library/alpine:3.9.5\",\"imageID\":\"docker.io/library/alpine@sha256:115731bab0862031b44766733890091c17924f9b7781b79997f5f163be262178\",\"lastState\":{},\"name\":\"create-output-file\",\"ready\":true,\"restartCount\":0,\"state\":{\"terminated\":{\"containerID\":\"containerd://d02eff3e9547c1bbda6b90ae18b3baa3cd262886912b56be0bf68f6bed0ed41d\",\"exitCode\":0,\"finishedAt\":\"2020-06-27T19:21:41Z\",\"reason\":\"Completed\",\"startedAt\":\"2020-06-27T19:21:41Z\"}}}],\"phase\":\"Running\",\"podIP\":\"10.42.0.202\",\"podIPs\":[{\"ip\":\"10.42.0.202\"}],\"qosClass\":\"Burstable\",\"startTime\":\"2020-06-27T19:21:40Z\"}}\n2020-06-27 21:21:48 DEBUG ExecWebSocketListener: Exec Web Socket: On Close with code:[1000], due to: []\n2020-06-27 21:21:48 DEBUG WatchConnectionManager: Force closing the watch io.fabric8.kubernetes.client.dsl.internal.WatchConnectionManager@66b71771\n2020-06-27 21:21:48 DEBUG WatchConnectionManager: Closing websocket okhttp3.internal.ws.RealWebSocket@68ab0936\n2020-06-27 21:21:48 DEBUG WatchConnectionManager: WebSocket close received. code: 1000, reason: \n2020-06-27 21:21:48 DEBUG WatchConnectionManager: Ignoring onClose for already closed/closing websocket\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 value             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \"cat-facts-topic\" \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n2020-06-27 21:21:48 DEBUG zoe: closing: com.adevinta.oss.zoe.service.runners.KubernetesRunner@885e7ff\n2020-06-27 21:21:48 DEBUG zoe: deleting potentially dangling pods...\n2020-06-27 21:21:48 DEBUG zoe: closing: com.adevinta.oss.zoe.service.storage.BufferedKeyValueStore@625dfff3\n2020-06-27 21:21:48 DEBUG zoe: closing: com.adevinta.oss.zoe.service.secrets.SecretsProviderWithLogging@57272109\n</code></pre>"},{"location":"guides/kubernetes/guide/#producing-data","title":"Producing data","text":"<p>Produce some data from the cat facts dataset (we assume you cloned the repository, and you are in the <code>docs/guides/kubernetes</code> directory):</p> CommandOutput <pre><code>zoe -e k8s -o table topics produce --topic cat-facts-topic --from-file data.json\n</code></pre> <pre><code>2020-06-27 21:12:37 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n2020-06-27 21:12:38 INFO zoe: producing '212' records to topic 'cat-facts-topic'\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 produced                                                                     \u2502 skipped \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 offset: 21  partition: 5  topic: \"cat-facts-topic\"  timestamp: 1593285166459 \u2502         \u2502\n\u2502 offset: 25  partition: 0  topic: \"cat-facts-topic\"  timestamp: 1593285166500 \u2502         \u2502\n\u2502 offset: 19  partition: 4  topic: \"cat-facts-topic\"  timestamp: 1593285166501 \u2502         \u2502\n\u2502 offset: 26  partition: 0  topic: \"cat-facts-topic\"  timestamp: 1593285166501 \u2502         \u2502\n\u2502 offset: 23  partition: 8  topic: \"cat-facts-topic\"  timestamp: 1593285166501 \u2502         \u2502\n| ...                                                                          |         |\n\u2502 offset: 17  partition: 3  topic: \"cat-facts-topic\"  timestamp: 1593285166501 \u2502         \u2502\n\u2502 offset: 47  partition: 6  topic: \"cat-facts-topic\"  timestamp: 1593285166570 \u2502         \u2502\n\u2502 offset: 49  partition: 7  topic: \"cat-facts-topic\"  timestamp: 1593285166570 \u2502         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/kubernetes/guide/#reading-data","title":"Reading data","text":"<p>You can read data using the following command:</p> CommandOutput <pre><code>zoe -e k8s -o table topics consume cat-facts-topic --from 'PT1h' -n 5        \n</code></pre> <pre><code>2020-06-27 21:18:06 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n2020-06-27 21:18:07 INFO zoe: querying offsets...\n2020-06-27 21:18:15 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={8=0, 7=0, 9=0, 4=0, 3=0, 6=0, 5=0, 0=0, 2=0, 1=0}))\n2020-06-27 21:18:24 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={8=5}))\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 _id                      \u2502 text                                                  \u2502 type \u2502 user                                      \u2502 upvotes \u2502 userUpvoted \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 599f89639a11040c4a163440 \u2502 Here is a video of some cats in zero gravity. yout... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 5       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00a090aac31001185ed16 \u2502 Cats make more than 100 different sounds whereas d... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 590b9d90229d260020af0b06 \u2502 Evidence suggests domesticated cats have been arou... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e008780aac31001185ed05 \u2502 Owning a cat can reduce the risk of stroke and hea... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5b3d8e4960d3890713ca39a8 \u2502 A Chinese cat named Baidianr (meaning \"white spot\"... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/kubernetes/guide/#parallelizing-the-consumption-to-perform-expensive-searches","title":"Parallelizing the consumption to perform expensive searches","text":"<p>Now imagine we want to find cat facts we received in the previous hour, written by the user whose first name is <code>Kasimir</code>. With zoe, you can achieve that using:</p> CommandOutput <pre><code># filter out Kasimir's data\nzoe -e k8s -o table topics consume cat-facts-topic \\\n       --from 'PT1h' \\\n       --filter \"user.name.first == 'Kasimir'\" \\\n       -n 5\n</code></pre> <pre><code>2020-06-27 21:28:43 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n2020-06-27 21:28:44 INFO zoe: querying offsets...\n2020-06-27 21:28:52 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={8=0, 7=0, 9=0, 4=0, 3=0, 6=0, 5=0, 0=0, 2=0, 1=0}))\n2020-06-27 21:29:00 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={8=28}))\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 _id                      \u2502 text                                                  \u2502 type \u2502 user                                      \u2502 upvotes \u2502 userUpvoted \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00a090aac31001185ed16 \u2502 Cats make more than 100 different sounds whereas d... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e008780aac31001185ed05 \u2502 Owning a cat can reduce the risk of stroke and hea... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e007db0aac31001185ecf7 \u2502 There are cats who have survived falls from over 3... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00a850aac31001185ed1a \u2502 Cats have a longer-term memory than dogs, especial... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00ba00aac31001185edfa \u2502 When cats leave their poop uncovered, it is a sign... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Now, what if the topic is too big? With zoe you can parallelize the consumption over multiple pods using the <code>--jobs</code> option:</p> CommandOutput <pre><code># filter out Kasimir's data (parallelize the search over 5 pods)\nzoe -e k8s -o table topics consume cat-facts-topic \\\n       --from 'PT1h' \\\n       --filter \"user.name.first == 'Kasimir'\" \\\n       --jobs 5 \\\n       -n 5\n</code></pre> <pre><code>2020-06-28 01:39:31 INFO zoe: loading config from url : file:~/.zoe/config/k8s.yml\n2020-06-28 01:39:32 INFO zoe: querying offsets...\n2020-06-28 01:39:40 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={8=0, 3=0}))\n2020-06-28 01:39:40 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={7=0, 2=0}))\n2020-06-28 01:39:40 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={9=0, 4=0}))\n2020-06-28 01:39:40 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={6=0, 1=0}))\n2020-06-28 01:39:40 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={5=0, 0=0}))\n2020-06-28 01:39:49 INFO zoe: polling topic 'cat-facts-topic' (subscription : AssignPartitions(partitions={6=9}))\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 _id                      \u2502 text                                                  \u2502 type \u2502 user                                      \u2502 upvotes \u2502 userUpvoted \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e007cc0aac31001185ecf5 \u2502 Cats are the most popular pet in the United States... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e008a30aac31001185ed0b \u2502 A cat's purr may be a form of self-healing, as it ... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00b820aac31001185edf7 \u2502 One legend claims that cats were created when a li... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e009390aac31001185ed10 \u2502 Most cats are lactose intolerant, and milk can cau... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00c080aac31001185ee01 \u2502 Cats only sweat through their foot pads.              \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>This is obviously overkill in this case as we have a small dataset but this is extremely useful when dealing with large topics.</p>"},{"location":"guides/kubernetes/guide/#clean-up","title":"Clean up","text":"Command <pre><code>kubectl delete all -l context=zoe-demo\n</code></pre>"},{"location":"guides/simple/guide/","title":"A basic scenario","text":"<p>This guide walks you through the most basic functionalities of zoe. It uses a funny dataset downloaded from the Cat Facts API to explore reading and writing data from / into kafka using zoe.</p> <p>In this guide, we will spin up a simple one node kafka cluster locally and then interact with it using zoe.</p> <p>If you want to follow along the instructions in this guide, you can find all the relevant files / datasets in the repository.</p>"},{"location":"guides/simple/guide/#what-you-will-learn","title":"What you will learn","text":"<p>In this guide, you will learn the following aspects of zoe:</p> <ul> <li>Creating topics</li> <li>Listing topics</li> <li>Describing topics</li> <li>Writing json data into kafka</li> <li>Reading json data from kafka</li> <li>Using jmespath expressions to filter read data based on its content.</li> </ul>"},{"location":"guides/simple/guide/#prerequisites","title":"Prerequisites","text":"<p>For this guide you will need:</p> <ul> <li>Zoe (install instructions are here)</li> <li>Docker and docker-compose (that we will use to spin up Kafka)</li> </ul>"},{"location":"guides/simple/guide/#prepare-the-environment","title":"Prepare the environment","text":"<ul> <li>Clone the repository: <code>git clone https://github.com/adevinta/zoe.git</code></li> <li>Go to the directory: <code>docs/guides/simple</code></li> <li>Spin up the kafka cluster: <code>docker-compose up -d</code>.</li> <li>Check all the containers are up:</li> </ul> Command <pre><code>docker-compose ps      \n</code></pre> Output <pre><code>  Name               Command            State                        Ports                      \n------------------------------------------------------------------------------------------------\nbroker      /etc/confluent/docker/run   Up      0.0.0.0:29092-&gt;29092/tcp, 0.0.0.0:9092-&gt;9092/tcp\nzookeeper   /etc/confluent/docker/run   Up      0.0.0.0:2181-&gt;2181/tcp, 2888/tcp, 3888/tcp      \n</code></pre>"},{"location":"guides/simple/guide/#configure-zoe","title":"Configure zoe","text":"<p>Now, we need to configure zoe to make it aware of the cluster.</p> <p>Create a new file called <code>default.yml</code> inside zoe's config directory (<code>~/.zoe/config</code> by default) and fill it with the following content:</p> ~/.zoe/config/default.yml <pre><code>clusters:\n  default:\n    props:\n      bootstrap.servers: \"localhost:29092\"\n      key.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      value.deserializer: \"org.apache.kafka.common.serialization.StringDeserializer\"\n      key.serializer: \"org.apache.kafka.common.serialization.StringSerializer\"\n      value.serializer: \"org.apache.kafka.common.serialization.ByteArraySerializer\"\n\n    topics:\n      input:\n        name: input-topic\n\nrunners:\n  default: \"local\"\n</code></pre> <p>The configuration above defines:</p> <ul> <li>A <code>clusters</code> section containing a single cluster aliased <code>default</code>. Clusters can be given any alias. Later on, when using zoe, we refer to a specific cluster by its alias using the <code>--cluster &lt;cluster alias&gt;</code> option. Otherwise, Zoe uses the cluster alias <code>default</code> if no cluster is specified using <code>--cluster</code>.</li> <li>The <code>default</code> cluster configuration defines:<ul> <li>A <code>props</code> section containing the kafka properties that need to be supplied to the kafka clients when interacting with the cluster.</li> <li>A <code>topics</code> section containing a single topic aliased <code>input</code> that points to the real topic name <code>input-topic</code>. When reading to / from topics with zoe, we refer to a specific topic by its alias or real name. If we use an alias, zoe replaces it with the real name defined in the configuration.</li> </ul> </li> <li>The <code>runners</code> section defines the <code>local</code> runner as the default one. This makes zoe by default runs the consumers / producers from the caller's machine. Zoe can use other runners like the kubernetes runner which runs the consumers / producers as kubernetes pods in a remote cluster. For more information about runners, checkout the dedicated section about runners.</li> </ul> <p>For more information on how to configure zoe, checkout the configuration section in the documentation.</p> <p>If you don't want to write this configuration by hand, you can copy the one already present in the repository by using the following command:</p> Command <pre><code>zoe config init --from git --url https://github.com/adevinta/zoe --dir docs/guides/simple/config\n</code></pre> <p>You can check that zoe is now aware of the cluster by executing the following command:</p> Command <pre><code>zoe --silent -o table config clusters list\n</code></pre> Output <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 cluster \u2502 brokers         \u2502 registry \u2502 topics                              \u2502 groups \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 local   \u2502 localhost:29092 \u2502 null     \u2502 alias: \"input\"  name: \"input-topic\" \u2502        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Now, you're ready to use zoe to interact with the local kafka cluster.</p>"},{"location":"guides/simple/guide/#creating-topics","title":"Creating topics","text":"<p>The first step is to create our input topic by executing the following command:</p> Command <pre><code>zoe topics create input --partitions 5 --replication-factor 1\n</code></pre> Output <pre><code>2020-06-27 17:53:23 INFO zoe: loading config from url : file:~/.zoe/config/default.yml\n2020-06-27 17:53:23 INFO zoe: creating topic: input-topic\n2020-06-27 17:53:24 INFO AppInfoParser: Kafka version: 5.5.0-ccs\n2020-06-27 17:53:24 INFO AppInfoParser: Kafka commitId: 785a156634af5f7e\n2020-06-27 17:53:24 INFO AppInfoParser: Kafka startTimeMs: 1593273204138\n{\"done\":true}\n</code></pre> <p>Notice that we have used the topic alias <code>input</code> and zoe replaced it with the real name of the topic <code>input-topic</code> defined in the configuration file. In zoe, you can use both aliases or real topic names when interacting with topics.</p> <p>Let's check the topic has been created (we are using the <code>--silent</code> option to avoid outputting logs):</p> Command <pre><code>zoe --silent -o table topics list\n</code></pre> Output <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 value         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \"input-topic\" \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>We can also describe the topic:</p> Command <pre><code>zoe --silent -o table topics describe input\n</code></pre> Output <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 topic       \u2502 internal \u2502 partitions \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502             \u2502          \u2502 0          \u2502\n\u2502             \u2502          \u2502 1          \u2502\n\u2502 input-topic \u2502 false    \u2502 2          \u2502\n\u2502             \u2502          \u2502 3          \u2502\n\u2502             \u2502          \u2502 4          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/simple/guide/#reading-and-writing-data-into-the-topic","title":"Reading and writing data into the topic","text":"<p>Let's write some data into the topic.</p> <p>We will use the dataset provided in the repository that contain some data from cats facts API.</p> <p>The following command writes the json data contained in this file into the <code>input</code> topic (assuming you are in the <code>docs/guides/simple</code> directory):</p> Command <pre><code>zoe -o table topics produce --topic input --from-file data.json\n</code></pre> Output <pre><code>2020-06-27 18:03:17 INFO zoe: loading config from url : file:~/.zoe/config/default.yml\n2020-06-27 18:03:17 INFO zoe: producing '212' records to topic 'input-topic'\n2020-06-27 18:03:17 INFO AppInfoParser: Kafka version: 5.5.0-ccs\n2020-06-27 18:03:17 INFO AppInfoParser: Kafka commitId: 785a156634af5f7e\n2020-06-27 18:03:17 INFO AppInfoParser: Kafka startTimeMs: 1593273797705\n2020-06-27 18:03:17 INFO Metadata: [Producer clientId=producer-1] Cluster ID: s7yIyv-2RSOWeNSaNSgAhQ\n2020-06-27 18:03:17 INFO KafkaProducer: [Producer clientId=producer-1] Closing the Kafka producer with timeoutMillis = 9223372036854775807 ms.\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 produced                                                                 \u2502 skipped \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 offset: 30  partition: 3  topic: \"input-topic\"  timestamp: 1593273797924 \u2502         \u2502\n\u2502 offset: 53  partition: 1  topic: \"input-topic\"  timestamp: 1593273797937 \u2502         \u2502\n\u2502 offset: 47  partition: 4  topic: \"input-topic\"  timestamp: 1593273797937 \u2502         \u2502\n\u2502 offset: 31  partition: 3  topic: \"input-topic\"  timestamp: 1593273797937 \u2502         \u2502\n\u2502 offset: 32  partition: 3  topic: \"input-topic\"  timestamp: 1593273797937 \u2502         \u2502\n\u2502 offset: 94  partition: 1  topic: \"input-topic\"  timestamp: 1593273797951 \u2502         \u2502\n| ...                                                                      | ...     |\n\u2502 offset: 95  partition: 1  topic: \"input-topic\"  timestamp: 1593273797951 \u2502         \u2502\n\u2502 offset: 96  partition: 1  topic: \"input-topic\"  timestamp: 1593273797951 \u2502         \u2502\n\u2502 offset: 85  partition: 2  topic: \"input-topic\"  timestamp: 1593273797951 \u2502         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>To read the data we have just inserted:</p> Command <pre><code># read 5 messages from the last hour\nzoe --silent -o table topics consume input -n 5 --from 'PT1h'\n</code></pre> Output <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 _id                      \u2502 text                                                  \u2502 type \u2502 user                                      \u2502 upvotes \u2502 userUpvoted \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5b1b411d841d9700146158d9 \u2502 The Egyptian Mau\u2019s name is derived from the Middle... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 5       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 59a60b8e6acf530020f3586e \u2502 Cat owners are 17% more likely to have a graduate ... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 5       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5b1b4055841d9700146158d3 \u2502 Scottish sailer Alexander Selkirk once survived fo... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5a4d76916ef087002174c28b \u2502 A cat\u2019s nose pad is ridged with a unique pattern, ... \u2502 cat  \u2502 _id: \"5a9ac18c7478810ea6c06381\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Alex\",\"last\":\"Wohlbruck\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00a120aac31001185ed17 \u2502 A cat's brain is 90% similar to a human's \u2014 more s... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>You can know more about the different options that can be used with: <code>zoe topics consume --help</code>. </p>"},{"location":"guides/simple/guide/#filtering-events","title":"Filtering events","text":"<p>One of the most powerful feature of zoe is its ability to filter out events using criterias based on events content.</p> <p>In the following example, we are filtering out cat facts written by the user whose first name is <code>Kasimir</code>:</p> Command <pre><code># filter out Kasimir's data\nzoe -o table topics consume input \\\n       -n 5 \\\n       --from 'PT1h' \\\n       --filter \"user.name.first == 'Kasimir'\"\n</code></pre> Output <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 _id                      \u2502 text                                                  \u2502 type \u2502 user                                      \u2502 upvotes \u2502 userUpvoted \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00a120aac31001185ed17 \u2502 A cat's brain is 90% similar to a human's \u2014 more s... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 4       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e007cc0aac31001185ecf5 \u2502 Cats are the most popular pet in the United States... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e008510aac31001185ecfe \u2502 In tigers and tabbies, the middle of the tongue is... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00bdb0aac31001185edfd \u2502 Cats can change their meow to manipulate a human. ... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 58e00ba00aac31001185edfa \u2502 When cats leave their poop uncovered, it is a sign... \u2502 cat  \u2502 _id: \"58e007480aac31001185ecef\"           \u2502 2       \u2502 null        \u2502\n\u2502                          \u2502                                                       \u2502      \u2502 name: {\"first\":\"Kasimir\",\"last\":\"Schulz\"} \u2502         \u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>The <code>--filter</code> option takes a jmespath expression and runs it against each event read from the topic. If this expression returns <code>true</code> for a given event, this event is returned. Otherwise, it is discarded.</p> <p>This feature is especially powerful when using remote runners as Zoe would run the consumers in the cloud (kubernetes or AWS lambdas) and only returns the relevant data to the caller's machine.</p>"},{"location":"guides/simple/guide/#clean-up-the-environment","title":"Clean up the environment","text":"<pre><code>docker-compose down -v\n</code></pre>"},{"location":"install/completion/","title":"Enable auto completion","text":"<p>To enable auto completion in <code>bash</code>, you can execute the following command:</p> <pre><code>source &lt;(_ZOE_COMPLETE=bash zoe)\n</code></pre> <p>Or if you are using zsh:</p> <pre><code>source &lt;(_ZOE_COMPLETE=zsh zoe)\n</code></pre> <p>To make this auto completion permanent, you can add the previous line to your <code>~/.bashrc</code> or <code>~/.zshrc</code>. </p>"},{"location":"install/docker/","title":"Using Zoe with Docker","text":"<p>We provide ready to use docker images for the CLI on each version release. This is a good alternative if your OS is not supported for the platform packages install or you don't want to install the JDK on your machine. The drawback however is a slightly higher startup latency.</p> <p>Zoe CLI can be launched within docker using the following command:</p> <pre><code>docker run --rm -v $HOME/zoe-docker:/root/.zoe adevinta/zoe-cli:latest --help\n</code></pre> <p>You can also use a release specific image:</p> <pre><code>docker run --rm -v $HOME/zoe-docker:/root/.zoe adevinta/zoe-cli:0.26.1 --help\n</code></pre>"},{"location":"install/docker/#creating-a-launcher","title":"Creating a launcher","text":"<p>If you want to have a native CLI experience, you can wrap the docker run call in a bash script. Here is an example on linux based systems:</p> ~/bin/zoe <pre><code>#!/usr/bin/env bash\n\nIMAGE=\"adevinta/zoe:latest\"\n\n# Use the host user\nDOCKER_RUN=\"docker container run -i --rm -v $HOME/zoe-docker:/root/.zoe\"\n\n# pass zoe specific environment variables\n[[ -n \"${ZOE_CLUSTER}\" ]] &amp;&amp; DOCKER_RUN=\"${DOCKER_RUN} -e ZOE_CLUSTER=${ZOE_CLUSTER}\"\n[[ -n \"${ZOE_ENV}\" ]] &amp;&amp; DOCKER_RUN=\"${DOCKER_RUN} -e ZOE_ENV=${ZOE_ENV}\"\n[[ -n \"${ZOE_CONFIG_DIR}\" ]] &amp;&amp; DOCKER_RUN=\"${DOCKER_RUN} -e ZOE_CONFIG_DIR=${ZOE_CONFIG_DIR}\"\n[[ -n \"${ZOE_STACKTRACE}\" ]] &amp;&amp; DOCKER_RUN=\"${DOCKER_RUN} -e ZOE_STACKTRACE=${ZOE_STACKTRACE}\"\n[[ -n \"${_ZOE_COMPLETE}\" ]] &amp;&amp; DOCKER_RUN=\"${DOCKER_RUN} -e _ZOE_COMPLETE=${_ZOE_COMPLETE}\"\n\n# pass AWS secrets\nif [[ -n \"${AWS_SECRET_ACCESS_KEY}\" ]]; then\n    DOCKER_RUN_ME=\"${DOCKER_RUN_ME} -e AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}\"\n    DOCKER_RUN_ME=\"${DOCKER_RUN_ME} -e AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}\"\n    DOCKER_RUN_ME=\"${DOCKER_RUN_ME} -e AWS_SESSION_TOKEN=${AWS_SESSION_TOKEN}\"\nfi\n\nexec ${DOCKER_RUN} ${IMAGE} \"$@\"\n</code></pre> <p>Once this file is created, make it executable:</p> <pre><code>chmod +x ~/bin/zoe\n</code></pre> <p>Make sure that the <code>~/bin</code> folder is in your path. If not, you can add it by appending the following line in your <code>~/.bashrc</code> (or <code>~/.zshrc</code>):</p> <pre><code>PATH=\"$PATH:~/bin\"\n</code></pre> <p>Restart your session. You should now be able to launch zoe by using:</p> <pre><code>zoe --help\n</code></pre>"},{"location":"install/homebrew/","title":"Install with Homebrew","text":"<p>You can install Zoe with Homebrew in both MacOs and linux environments.</p> <p>To install Zoe with Homebrew, you need the following prerequisites:</p> <ul> <li>Homebrew</li> <li>JDK11 or higher (You can install it either with sdkman or Homebrew itself).</li> </ul> <p>Once you have the above installed, you can proceed to the next step:</p> <pre><code># install\nbrew install adevinta/homebrew-zoe/zoe\n\n# test\nzoe --help\n</code></pre> <p>You are now ready to use zoe. Go to the Getting started section.</p>"},{"location":"install/overview/","title":"Install Zoe CLI","text":"<p>There are several ways to install zoe depending on your needs and the operation system you are using:</p> <ul> <li>Platform package install: Self contained platform packages (<code>.deb</code>, <code>.rpm</code>, etc.) built using the new jpackage utility. These packages contain all the dependencies required including the java virtual machine and do not require the host machine to have its own JDK. This is the easiest way to install zoe (if your platform is supported).</li> <li>Homebrew: Zoe can also be installed using Homebrew on MacOs and Linux environments. Installed packages do not contain the JDK though, so the host machine is required to have a JDK 11 or higher.</li> <li>Manual tarball install: If none of the above options are available for you, Zoe provides tarballs ready to be used in all platforms (including Windows). The host machine is required to have a JDK 11 or higher.</li> <li>Docker: Zoe can also be used with docker. We provide ready to use images automatically built for each release.</li> </ul>"},{"location":"install/package/","title":"Platform package install (recommended)","text":"<p>You can install zoe using one of the platform packages listed below. Only few platforms are supported for now but more will come in the future. </p> <p>The platform packages are self contained. They ship with their own version of the java virtual machine (thus the higher size of the package). The host machine does not need to have it's own java runtime.</p> <p>The platform packages are built with jpackage and JDK 14. </p>"},{"location":"install/package/#ubuntu-debian","title":"Ubuntu / Debian","text":"<ol> <li> <p>Download the <code>.deb</code> package from the latest release page and install it using <code>dpkg</code>:</p> <pre><code>ZOE_VERSION='0.26.1'  # change it to the suitable version\ncurl -L \"https://github.com/adevinta/zoe/releases/download/v${ZOE_VERSION}/zoe_${ZOE_VERSION}-1_amd64.deb\" -o /tmp/zoe.deb\nsudo dpkg -i /tmp/zoe.deb\n</code></pre> </li> <li> <p>Add the <code>/opt/zoe/bin</code> to your path by appending the following line in your <code>.bashrc</code> (or <code>.zshrc</code>) :</p> <pre><code>PATH=$PATH:/opt/zoe/bin\n</code></pre> </li> <li> <p>You can now initialize zoe configuration :</p> <pre><code>zoe -v config init\n</code></pre> </li> </ol> <p>You are now ready to use zoe. Go to the Getting started section.</p>"},{"location":"install/package/#centos","title":"Centos","text":"<ol> <li> <p>Install the latest <code>.rpm</code> package from the latest release page :</p> <pre><code>ZOE_VERSION=0.26.1  # change it to the suitable version\nsudo rpm -i \"https://github.com/adevinta/zoe/releases/download/v${ZOE_VERSION}/zoe-${ZOE_VERSION}-1.x86_64.rpm\"\n</code></pre> </li> <li> <p>Add the <code>/opt/zoe/bin</code> into your path by appending the following line in your <code>.bashrc</code> (or <code>.zshrc</code>) :</p> <pre><code>PATH=$PATH:/opt/zoe/bin\n</code></pre> </li> <li> <p>You can now initialize zoe configuration :</p> <pre><code>zoe -v config init\n</code></pre> </li> </ol> <p>You are now ready to use zoe. Go to the Getting started section.</p>"},{"location":"install/tarball/","title":"Manual tarball install (requires a JDK on the host machine)","text":"<p>Java 11 or higher is required in order to install the runtime-less tarball packages. They only ship with the Zoe CLI jar. </p> <p>If you don't have java installed already, you can use sdkman for an easy install and version management of the JDK. If you don't want to install java you can try one of the platform packages provided in the previous section.</p> <p>Once java is installed, proceed with the following steps :</p> <ol> <li> <p>Download the runtime-less zip or tar package of the zoe CLI from the latest release page and uncompress it into your home directory (or wherever you wish)</p> <pre><code>ZOE_VERSION=0.26.1  # change it to the suitable version\ncurl -L \"https://github.com/adevinta/zoe/releases/download/v${ZOE_VERSION}/zoe-${ZOE_VERSION}.tar.gz\" | tar -zx -C $HOME\n</code></pre> </li> <li> <p>Add the <code>$HOME/zoe/bin</code> into your path by appending the following line in your <code>.bashrc</code> (or <code>.zshrc</code>) : <pre><code>PATH=$PATH:$HOME/zoe/bin\n</code></pre></p> </li> <li>Init zoe configuration : <pre><code>zoe config init\n</code></pre></li> <li>You are now ready to use zoe. Go to the guides section to start learning zoe.</li> </ol>"}]}